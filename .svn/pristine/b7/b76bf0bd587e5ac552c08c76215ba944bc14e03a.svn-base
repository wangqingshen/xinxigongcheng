{"version":3,"sources":["mobileSelect.js"],"names":["window","MobileSelect","getClass","dom","string","getElementsByClassName","config","this","mobileSelect","wheelsData","wheels","jsonType","jsonData","checkDataType","renderWheels","displayJson","cascade","startY","moveEndY","moveY","oldMoveY","offset","offsetSum","oversizeBorder","curDistance","clickStatus","init","prototype","constructor","_this","trigger","document","querySelector","wheel","slider","liHeight","offsetHeight","ensureBtn","closeBtn","grayLayer","popUp","callback","transitionEnd","initPosition","position","titleText","title","className","style","cursor","setTitle","checkCascade","initCascade","length","i","push","setCurDistance","addListenerAll","addEventListener","classList","remove","$","hasClass","popup","hide","getElementById","data_id","tempValue","getValue","getDataId","type","attr","data-id","data-type","innerHTML","id","setAttribute","text","removeAttr","removeClass","_wheels","_list","JSON","parse","localStorage","take_meal_list","_tempHTML","find","append","addClass","val","data_price","getDataPrice","totalAmount","yhAmount","addAmount","accAdd","accAmount","accSub","getIndexArr","getJson","add","event","stopPropagation","fixRowStyle","createElement","body","appendChild","tempHTML","j","data","undefined","d_price","d_id","d_name","expert_id","expert_name","addListenerWheel","addListenerLi","theWheel","index","touch","firstChild","dragClick","sliderIndex","curWheelLi","getElementsByTagName","singleClick","node","childs","generateArrData","checkArrDeep","updateWheels","targetArr","tempArr","value","parent","checkRange","posIndexArr","deleteNum","pop","resultNode","resetPostion","tempCount","tempPosArr","count","removeChild","tempWheel","updateWheel","width","toFixed","getIndex","distance","Math","round","temp","positionArr","calcDistance","indexArr","movePosition","fixPosition","theSlider","webkitTransform","transform","locatePostion","posIndex","updateCurDistance","parseInt","split","getDistance","getAttribute","touches","clientY","changedTouches","setTimeout","preventDefault","theLi","parentNode"],"mappings":"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","file":"mobileSelect.js","sourcesContent":["/*!\r\n * mobileSelect.js\r\n * (c) 2017-present onlyhom\r\n * Released under the MIT License.\r\n */\r\n\r\nwindow.MobileSelect = (function() {\r\n\r\n\tfunction getClass(dom,string) {\r\n\t\treturn dom.getElementsByClassName(string);\r\n\t}\r\n\r\n\t//构造器\r\n\tfunction MobileSelect(config) {\r\n\t\tthis.mobileSelect;\r\n\t\tthis.wheelsData = config.wheels;\r\n\t\tthis.jsonType =  false;\r\n\t\tthis.jsonData = [];\r\n\t\tthis.checkDataType();\r\n\t\tthis.renderWheels(this.wheelsData);\r\n\t\tthis.displayJson = []; \r\n\t\tthis.cascade = false;\r\n\t\tthis.startY;\r\n\t\tthis.moveEndY;\r\n\t\tthis.moveY;\r\n\t\tthis.oldMoveY;\r\n\t\tthis.offset = 0;\r\n\t\tthis.offsetSum = 0;\r\n\t\tthis.oversizeBorder;\r\n\t\tthis.curDistance = [];\r\n\t\tthis.clickStatus = false;\r\n\r\n\t\tthis.init(config);\r\n\t}\r\n\t\r\n\tMobileSelect.prototype = {\r\n\t\tconstructor: MobileSelect,\r\n\t\tinit: function(config){\r\n\t\t\tvar _this = this; \r\n\t\t\t_this.trigger = document.querySelector(config.trigger);\r\n\t\t\t_this.wheel = getClass(_this.mobileSelect,'wheel');   //wheel 数组\r\n\t\t\t_this.slider = getClass(_this.mobileSelect,'selectContainer'); // slider 数组\r\n\t\t\t_this.wheels = _this.mobileSelect.querySelector('.wheels');   //wheels\r\n\t\t\t_this.liHeight = _this.mobileSelect.querySelector('li').offsetHeight;\r\n\t\t\t_this.ensureBtn = _this.mobileSelect.querySelector('.ensure');\r\n\t\t\t_this.closeBtn = _this.mobileSelect.querySelector('.cancel');\r\n\t\t\t_this.grayLayer = _this.mobileSelect.querySelector('.grayLayer');\r\n\t\t\t_this.popUp = _this.mobileSelect.querySelector('.content');\r\n\t\t\t_this.callback = config.callback ? config.callback : function(){};\r\n\t\t\t_this.transitionEnd = config.transitionEnd ? config.transitionEnd : function(){};\r\n\t\t\t_this.initPosition = config.position ? config.position : [];\r\n\t\t\t_this.titleText = config.title ? config.title : '';\r\n\r\n\t\t\t_this.wheels.className += \" \" + _this.trigger.className;\r\n\t\t\t_this.trigger.style.cursor='pointer';\r\n\t\t\t_this.setTitle(_this.titleText);\r\n\t\t\t_this.checkCascade();\r\n\r\n\t\t\tif (_this.cascade) {\r\n\t\t\t\t_this.initCascade();\r\n\t\t\t}\r\n\r\n\t\t\t//定位 初始位置\r\n\t\t\tif(_this.initPosition.length == 0){\r\n\t\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t\t_this.initPosition.push(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_this.setCurDistance(_this.initPosition);\r\n\t\t\t_this.addListenerAll();\r\n\r\n\t\t\t//按钮监听\r\n\t\t\t_this.closeBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\r\n\t\t    _this.ensureBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t\tif($(_this.trigger).hasClass('filter-type') || $(_this.trigger).hasClass('filter-stage')) {\r\n\t\t\t\tpopup.hide(document.getElementById(\"filter-type\"));\r\n\t\t\t\tvar data_id='';\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ti==_this.wheel.length-1 ? tempValue += _this.getValue(i) : tempValue += _this.getValue(i)+' ';\r\n\t\t    \t\ti==_this.wheel.length-1 ? data_id += _this.getDataId(i) : data_id += _this.getDataId(i)+' ';\r\n\t\t    \t}\r\n\t\t    \tvar type = $(_this.trigger).hasClass('filter-type') ? '2':'3';\r\n\t\t    \t$(this).attr({'data-id': data_id, 'data-type': type});\r\n\t\t\t}else{\r\n\t\t\t\tvar tempValue ='';\r\n\t\t\t\tvar data_id='';\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ti==_this.wheel.length-1 ? tempValue += _this.getValue(i) : tempValue += _this.getValue(i)+' ';\r\n\t\t    \t\ti==_this.wheel.length-1 ? data_id += _this.getDataId(i) : data_id += _this.getDataId(i)+' ';\r\n\t\t    \t}\r\n\t\t    \t_this.trigger.innerHTML = tempValue;\r\n\t\t    \tvar id = $(_this.trigger).attr('data-id');\r\n\t\t    \t_this.trigger.setAttribute('data-id', data_id);\r\n\t\t    \tif($(_this.trigger).hasClass('select-sc-address')) {\r\n\t\t    \t\tif(id != data_id) {\r\n\t\t    \t\t\t$('span.select-qc-address').text('请选择').removeAttr('data-id');\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t\tvar _wheels = $('.wheels.select-qc-address');\r\n\t\t\t   \t\t\tvar _list = JSON.parse(localStorage.take_meal_list)[data_id];\r\n\t\t\t   \t\t\tvar _tempHTML = '';\r\n\t\t\t   \t\t\t_wheels.find('ul>li').remove();\r\n\t\t\t   \t\t\tfor(var i in _list) {\r\n\t\t\t\t\t\t\t_tempHTML += '<li data-id=\"'+i+'\">'+_list[i]+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_wheels.find('ul').append(_tempHTML);\r\n\t\t    \t\t}\r\n\t\t    \t} else if($(_this.trigger).hasClass('select-qc-address')) {\r\n\t\t    \t\tif(data_id == '-1') {\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t}else{\r\n\t\t    \t\t\t$('.address-textarea').addClass('aui-hide');\r\n\t\t    \t\t\t$('.f-textarea>textarea').val('');\r\n\t\t    \t\t\t\r\n\t\t    \t\t}\t\r\n\t\t    \t}else if ($(_this.trigger).hasClass('coupon-list')) {\r\n\t\t    \t\tvar data_price = '';\r\n\t\t    \t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t    \t\ti==_this.wheel.length-1 ? data_price += _this.getDataPrice(i) : data_price += _this.getDataPrice(i)+' ';\r\n\t\t\t    \t}\r\n\t\t\t    \tvar totalAmount = $('.pay-total').text();\r\n\t\t\t    \tvar yhAmount = $('.yh-money').text();\r\n\t\t\t    \tvar addAmount = accAdd(totalAmount, yhAmount);\r\n\t\t\t    \tvar accAmount = accSub(addAmount, data_price);\r\n\t\t\t    \t$('.pay-total').text(accAmount);\r\n\t\t\t    \t$('.yh-money').text(data_price);\r\n\t\t\t    \t_this.trigger.setAttribute('data-price', data_price);\r\n\t\t    \t}\r\n\t\t    \t_this.callback(_this.getIndexArr(),_this.getJson());\r\n\t\t\t}\r\n\t\t    });\r\n\r\n\t\t    _this.trigger.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.add('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.grayLayer.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.popUp.addEventListener('click',function(){\r\n\t\t    \tevent.stopPropagation(); \r\n\t\t    });\r\n\r\n\t\t\t_this.fixRowStyle(); //修正列数\r\n\t\t},\r\n\r\n\t\tsetTitle: function(string){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.titleText = string;\r\n\t\t\t_this.mobileSelect.querySelector('.title').innerHTML = _this.titleText;\r\n\t\t},\r\n\r\n\t\trenderWheels: function(wheelsData){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.mobileSelect = document.createElement(\"div\");\r\n\t\t\t_this.mobileSelect.className = \"mobileSelect\";\r\n\t\t\t_this.mobileSelect.innerHTML = \r\n\t\t    \t'<div class=\"grayLayer\"></div>'+\r\n\t\t        '<div class=\"content\">'+\r\n\t\t            '<div class=\"btnBar\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                    '<div class=\"cancel\">取消</div>'+\r\n\t\t                    '<div class=\"title\"></div>'+\r\n\t\t                    '<div class=\"ensure\">选择</div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t            '<div class=\"panel\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                \t'<div class=\"wheels\">'+\r\n\t\t\t                '</div>'+\r\n\t\t                    '<div class=\"selectLine\"></div>'+\r\n\t\t                    '<div class=\"shadowMask\"></div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t        '</div>';\r\n\t\t    document.body.appendChild(_this.mobileSelect);\r\n\t\t\t//根据数据长度来渲染\r\n\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var i in wheelsData){ //列\r\n\t\t\t\ttempHTML += '<div class=\"wheel\"><ul class=\"selectContainer\">';\r\n\t\t\t\tif(_this.jsonType){\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) { \r\n\t\t\t\t\t\tif(wheelsData[i].data[j].d_price != undefined) {\r\n\t\t\t\t\t\t\tif(wheelsData[i].data[j].d_id == '-1') {\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'</li>';\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'  ￥-'+wheelsData[i].data[j].d_price+'</li>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].expert_id+'\">'+wheelsData[i].data[j].expert_name+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) {\r\n\t\t\t\t\t\ttempHTML += '<li data-id=\"'+j+'\">'+wheelsData[i].data[j]+'</li>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttempHTML += '</ul></div>';\r\n\t\t\t}\r\n\t\t\t_this.mobileSelect.querySelector('.wheels').innerHTML = tempHTML;\r\n\t\t},\r\n\r\n\t\taddListenerAll: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t//手势监听\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\t_this.addListenerWheel(_this.wheel[i], i);\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddListenerWheel: function(theWheel, index){\r\n\t\t\tvar _this = this;\r\n\t\t\ttheWheel.addEventListener('touchstart', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchend', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchmove', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\r\n\t\t\t//PC拖拽监听\r\n\t\t\ttheWheel.addEventListener('mousedown', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mousemove', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mouseup', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},true); \r\n\t\t},\r\n\r\n\t\taddListenerLi:function(sliderIndex){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar curWheelLi = _this.slider[sliderIndex].getElementsByTagName('li');\r\n\t\t\tfor(var j=0; j<curWheelLi.length;j++){\r\n\t\t\t\t(function (j) {\r\n\t\t\t\t\tcurWheelLi[j].addEventListener('click',function(){\r\n\t\t\t\t\t\t_this.singleClick(this, j, sliderIndex);\r\n\t\t\t\t\t},false);\r\n\t\t\t\t})(j);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckDataType: function(){ \r\n\t\t\tvar _this = this;\r\n\t\t\tif(typeof(_this.wheelsData[0].data[0])=='object'){\r\n\t\t\t\t_this.jsonType = true;\r\n\t\t\t\t_this.jsonData = _this.wheelsData[0].data;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tif(_this.jsonType){ \r\n\t\t\t\tvar node = _this.wheelsData[0].data;\r\n\t\t\t\tfor(var i=0; i<node.length; i++){\r\n\t\t\t\t\tif('childs' in node[i] && node[i].childs.length > 0){\r\n\t\t\t\t\t\t_this.cascade = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_this.cascade = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.displayJson.push(_this.generateArrData(_this.jsonData));\r\n\t\t\t_this.checkArrDeep(_this.jsonData[0]);\r\n\t\t\t//console.log('将要显示的json:'); \r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t},\r\n\r\n\t\tgenerateArrData: function (targetArr) {\r\n\t\t\tvar tempArr = [];\r\n\t\t\tfor(var i=0; i<targetArr.length; i++){\r\n\t\t\t\ttempArr.push({\r\n\t\t\t\t\t\"id\": targetArr[i].id,\r\n\t\t\t\t\t\"value\": targetArr[i].value\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn tempArr;\r\n\t\t},\r\n\r\n\t\tcheckArrDeep: function (parent) { //检测子节点深度  修改 displayJson\r\n\t\t\tvar _this = this;\r\n\t\t\tif ('childs' in parent && parent.childs.length > 0) {\r\n\t\t\t\t_this.displayJson.push(_this.generateArrData(parent.childs)) ; //生成子节点数组\r\n\t\t\t\t_this.checkArrDeep(parent.childs[0]);//检测下一个子节点\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckRange: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar deleteNum = _this.displayJson.length-1-index;\r\n\t\t\tfor(var i=0; i<deleteNum; i++){\r\n\t\t\t\t_this.displayJson.pop(); //修改 displayJson\r\n\t\t\t}\r\n\t\t\tvar resultNode;\r\n\t\t\tfor (var i = 0; i <= index; i++){\r\n\t\t\t\tif (i == 0)\r\n\t\t\t\t\tresultNode = _this.jsonData[posIndexArr[0]];\r\n\t\t\t\telse {\r\n\t\t\t\t\tresultNode = resultNode.childs[posIndexArr[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_this.checkArrDeep(resultNode);\r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t\t_this.fixRowStyle();\r\n\t\t\t_this.setCurDistance(_this.resetPostion(index, posIndexArr));\r\n\t\t},\r\n\r\n\t\tresetPostion: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempPosArr = posIndexArr;\r\n\t\t\tvar tempCount;\r\n\t\t\tif(_this.slider.length > posIndexArr.length){ \r\n\t\t\t\ttempCount = _this.slider.length - posIndexArr.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){  \r\n\t\t\t\t\ttempPosArr.push(0);\r\n\t\t\t\t}\r\n\t\t\t}else if(_this.slider.length < posIndexArr.length){\r\n\t\t\t\ttempCount = posIndexArr.length - _this.slider.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){\r\n\t\t\t\t\ttempPosArr.pop();\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tfor(var i=index+1; i< tempPosArr.length; i++){\r\n\t\t\t\ttempPosArr[i] = 0;\r\n\t\t\t} \r\n\t\t\treturn tempPosArr;\r\n\t\t},\r\n\r\n\t\tupdateWheels: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t//删除多余的wheel\r\n\t\t\tif(_this.wheel.length > _this.displayJson.length){\r\n\t\t\t\tvar count = _this.wheel.length - _this.displayJson.length;\r\n\t\t\t\tfor(var i=0; i<count; i++){\r\n\t\t\t\t\t_this.wheels.removeChild(_this.wheel[_this.wheel.length-1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i=0; i<_this.displayJson.length; i++){ //列\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\tvar tempHTML='';\r\n\t\t\t\t\tif(_this.wheel[i]){\r\n\t\t\t\t\t\t//console.log('插入Li');\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.slider[i].innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar tempWheel = document.createElement(\"div\");\r\n\t\t\t\t\t\ttempWheel.className = \"wheel\";\r\n\t\t\t\t\t\ttempHTML = '<ul class=\"selectContainer\">';\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempHTML += '</ul>';\r\n\t\t\t\t\t\ttempWheel.innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t\t_this.addListenerWheel(tempWheel, i);\r\n\t\t\t\t    \t_this.wheels.appendChild(tempWheel); \r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateWheel: function(sliderIndex, data){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var j=0; j<data.length; j++){\r\n\t\t\t\ttempHTML += '<li>'+data[j]+'</li>'\r\n\t\t\t}\r\n\t\t\t_this.slider[sliderIndex].innerHTML = tempHTML;\r\n\t\t\t_this.addListenerLi(sliderIndex);\r\n\t\t},\r\n\r\n\t\tfixRowStyle: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar width = (100/_this.wheel.length).toFixed(2);\r\n\t\t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t\t_this.wheel[i].style.width = width+'%';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t    getIndex: function(distance){\r\n\t        return Math.round((2*this.liHeight-distance)/this.liHeight);\r\n\t    },\r\n\r\n\t    getIndexArr: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t    \t\ttemp.push(_this.getIndex(_this.curDistance[i]));\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    getJson: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tvar positionArr = _this.getIndexArr();\r\n\t    \tif(_this.cascade){\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ttemp.push(_this.displayJson[i][positionArr[i]]);\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \telse if(_this.jsonType){\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.wheelsData[i].data[_this.getIndex(_this.curDistance[i])]);\r\n\t\t    \t}\r\n\t    \t}else{\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.getValue(i));\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    calcDistance: function(index){\r\n\t\t\treturn 2*this.liHeight-index*this.liHeight;\r\n\t    },\r\n\r\n\t    setCurDistance: function(indexArr){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.slider.length; i++){\r\n\t    \t\ttemp.push(_this.calcDistance(indexArr[i]));\r\n\t    \t\t_this.movePosition(_this.slider[i],temp[i]);\r\n\t    \t}\r\n\t    \t_this.curDistance = temp;\r\n\t    },\r\n\r\n\t    fixPosition: function(distance){\r\n\t        return -(this.getIndex(distance)-2)*this.liHeight;\r\n\t    },\r\n\r\n\t    movePosition: function(theSlider, distance){\r\n\t        theSlider.style.webkitTransform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t        theSlider.style.transform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t    },\r\n\r\n\t    locatePostion: function(index, posIndex){\r\n\t    \tthis.curDistance[index] = this.calcDistance(posIndex);\r\n\t    \tthis.movePosition(this.slider[index],this.curDistance[index]);\r\n\t    },\r\n\r\n\t    updateCurDistance: function(theSlider, index){\r\n\t        this.curDistance[index] = parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getDistance:function(theSlider){\r\n\t    \treturn parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getValue: function(sliderIndex){\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].innerHTML;\r\n\t    },\r\n\r\n\t    getDataId: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-id');\r\n\t    },\r\n\r\n\t    getDataPrice: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-price');\r\n\t    },\r\n\r\n\t    touch: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"touchstart\":\r\n\t\t\t        _this.startY = event.touches[0].clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchend\":\r\n\r\n\t\t\t        _this.moveEndY = event.changedTouches[0].clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchmove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        _this.moveY = event.touches[0].clientY;\r\n\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    dragClick: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"mousedown\":\r\n\t\t\t        _this.startY = event.clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t\t\t        _this.clickStatus = true;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mouseup\":\r\n\r\n\t\t\t        _this.moveEndY = event.clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\t\t\t        _this.clickStatus = false;\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mousemove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        if(_this.clickStatus){\r\n\t\t\t\t        _this.moveY = event.clientY;\r\n\t\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    singleClick: function(theLi, index, sliderIndex){\r\n\t    \tvar _this = this;\r\n\t        if(_this.cascade){\r\n\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t        tempPosArr[sliderIndex] = index;\r\n\t        \t_this.checkRange(sliderIndex, tempPosArr);\r\n\r\n\t        }else{\r\n\t\t        _this.curDistance[sliderIndex] = (2-index)*_this.liHeight;\r\n\t\t        _this.movePosition(theLi.parentNode, _this.curDistance[sliderIndex]);\r\n\t        }\r\n\t    }\r\n\r\n\t};\r\n\r\n\treturn MobileSelect;\r\n})();\r\n"]}