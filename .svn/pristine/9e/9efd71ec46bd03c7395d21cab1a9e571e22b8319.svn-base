{"version":3,"sources":["common.js"],"names":["get_url_hash","key","param","url","location","href","str","split","arr","i","length","key_str","val_str","setRefreshHeight","_h","window","screen","height","$","css","getTaskParams","taskParamsSucc","info","mergeInfo","ajaxFun","getAnswerType","consultationParamsSucc","getRandStr","n","Math","floor","random","toString","getCurTime","date","Date","y","getFullYear","substr","m","getMonth","d","getDate","h","getHours","getMinutes","s","getSeconds","wxChooseImage","wx","chooseImage","count","needResult","sizeType","sourceType","success","data","localIds","rh","tostr","wxuploadImage","fail","res","alterShowMessage","JSON","stringify","wxBasicInfo","wxSuccssFn","timestamp","parse","nonceStr","nonce_str","md5_pwd","v","authcode","re","md5","successFun","beforeF","ajax","type","apiUrl","dataType","contentType","beforeSend","error","errorFun","beforeLoadFun","dom","load","createLoadDom","append","beforeDialogFun","mark","createDialog","remove","addClass","l","attr","localStorage","localStorage_url","text","createEmptyDom","e","apiName","appId","wechat","randStr","signature","hex_sha1","header","nonce","cmd","name","Base64","encode","push","decodeMsg","msg","decode","appid","stageList","typeList","account_type","page","pagesize","Login","toast","auiToast","module","init","setItem","val","checkUserInfo","bind","stopPropagation","username","pwd","title","duration","focus","user_name","user_pwd","errcode","user_id","taskUrl","alert","errmsg","jQuery","TaskList","task_type","stage_id","curType","curPage","scrollState","footerSuccFun","startDate","undefined","getTaskList","pullRefresh","filterEnsure","click","this","_id","children","page_size","endDate","timearea","start_time","end_time","auiPullToRefresh","container","document","querySelector","triggerDistance","ret","status","setTimeout","cancelLoading","scrollAddMore","auiScroll","listen","distance","isToBottom","scrollTop","getTaskInfo","t_id","task_id","successFun1","_c","clone","t","c","content","p","process","_img","task_img","_explain","task_examine_explain","find","removeAttr","_copy","stage_name","account_name","_a","mobile","html","dialog","auiDialog","buttons","buttonIndex","fsgallery","list","_clone","data-t-id","data-stage-id","t_stage_id","t_title","create_time","_e","filterPopEvt","each","popup","hide","getElementById","MobileSelect","trigger","wheels","stage","DateSearch","checkDateInfo","searchUrl","Newtask","_parent","imgSrc","maxStep","addStageStep","createTask","on","task_name","_l","getStageList","innerHTML","config","debug","jsApiList","ready","getImgInfo","localId","pop","getLocalImgData","localData","u","navigator","userAgent","isAndroid","indexOf","base_data","errMsg","num","_opt","j","_opt1","getAccount","accountSucc","selectLevelEvt","change","parents","listUrl","_list","_s_step","_s_level","_s_user","b","_step_id","_level_id","_user_id","_user_text","a_id","a_name","a_type","len","removeStageStep","parent","Review","getReviewList","getReviewInfo","updateStatus","examine_explain","successFun2","reload","before","_index","show","checkclass","target","className","task_status","Specfooter","addActiveFun","index","urlArr","eq","Footer","hasClass","Employee","getEmployeeList","tabSelectEvt","detailUrl","removeClass","account_id","task_title","Employeedetail","p_id","t_status","maxImgNum","p_status","imgcodes","imgDialog","getDetailInfo","_p","process_list","_t","task_content","task_examine_plain","now_process_id","src","data-index","process_id","imgDialogEvt","tabDisplayEvt","_i","taskChange","taskOver","addImgDialog","taskReview","taskTransfer","id","data-id","changeImage","changeImgInfo","splice","uploadImage","uploadSuccessFn","examine_content","successFun3","successFun4","Answer","getAnswerList","getAnswerInfo","user_type","wechat_member_id","data-a-id","consult_id","consult_title","last_reply","new_reply_time","consult_status","AnswerFooter","AddAnswer","explainPopup","submitEvt","consult_content","consult_type","member_id","AnswerDetail","consultReply","consultEnd","setReplyMaxHeight","getReplyList","listSuccessFun","replyer_type","head_img","nick_name","reply_time","reply_content","_h1","replyer_id","replySuccessFun","endSuccessFun","Expert","ExpertDetail","AdminExpert","AdminExpertDetail","getExpertType","expert_type","expertParamsSucc","consult_expert_name","eParamsSucc","ensureEvt","expert_id","Employeelogin","getVerCode","mob","code","test","wechat_openid","sns_code","nextUrl","_this","setSeconds","time","replace","getTime","sys_second","timer","setInterval","day","hour","minute","second","time_text","clearInterval","console","log","VerifyEmployee","outTaskUrl","expertUrl"],"mappings":"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","file":"common.js","sourcesContent":["var apiUrl = 'http://xxgc.manyouku.com/api.php';\r\nvar wechat = 100;\r\nvar appid = 'wxc9287e235818603c';\r\nvar timestamp, nonceStr;\r\nvar stageList = {};\r\nvar typeList = {};\r\nvar account_type = {};\r\n\r\nvar page = 1;\r\nvar pagesize = 10;\r\n\r\n//获取url后面的哈希值\r\nfunction get_url_hash(key){\r\n \tvar param = {};\r\n    var url = location.href;\r\n    var str = url.split(\"?\")[1];\r\n    var arr = str.split(\"&\");\r\n    for(var i=0; i<arr.length; i++){\r\n        var key_str = arr[i].split('=')[0];\r\n        var val_str = arr[i].split('=')[1];\r\n        param[key_str] = val_str\r\n    }\r\n    return param[key]\r\n}\r\n\r\nfunction setRefreshHeight() {\r\n\tvar _h = window.screen.height;\r\n\t$('.aui-refresh-content').css('min-height', _h-50+'px');\r\n}\r\n\r\nfunction getTaskParams(taskParamsSucc) {\r\n\tvar info = mergeInfo('task_global_params', '');\r\n\tajaxFun(info, taskParamsSucc, '');\r\n}\r\n\r\nfunction getAnswerType(consultationParamsSucc) {\r\n\tvar info = mergeInfo('consult_global_params', '');\r\n\tajaxFun(info, consultationParamsSucc, '');\r\n}\r\n\r\n/**\r\n * 随机生成一个n位的随机数\r\n * @param [Int] [n] 一个正整数\r\n * @return {String} [str] 生成的随机数\r\n * @author wxy\r\n * @private\r\n */\r\nfunction getRandStr(n) {\r\n\tvar str = '';\r\n\tfor (var i = 0; i < n; i++) {\r\n\t\tstr += Math.floor(Math.random() * 10).toString();\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n/**\r\n * 获取当前时间格式为ymdhis的时间字符串\r\n * @return {String} ymdhis\r\n * @author wxy\r\n */\r\n\r\nfunction getCurTime() {\r\n\tvar date = new Date(),\r\n\t\ty = date.getFullYear().toString().substr(2),\r\n\t\tm = (date.getMonth() + 1) < 10 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1).toString(),\r\n\t\td = date.getDate() < 10 ? '0' + date.getDate() : date.getDate().toString(),\r\n\t\th = date.getHours() % 12 < 10 ? '0' + date.getHours() % 12 : (date.getHours() % 12).toString(),\r\n\t\ti = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes().toString(),\r\n\t\ts = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds().toString();\r\n\treturn (y + m + d + h + i + s);\r\n}\r\n\r\nfunction wxChooseImage() {  \r\n    wx.chooseImage({  \r\n        count: 1,  \r\n        needResult: 1,  \r\n        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有  \r\n        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有  \r\n        success: function (data) {  \r\n            localIds = data.localIds[0].toString(); // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片  \r\n            if (rh.tostr(localIds)) {  \r\n                wxuploadImage(localIds);  \r\n            }  \r\n        },  \r\n        fail: function (res) {  \r\n            alterShowMessage(\"操作提示\", JSON.stringify(res), \"1\", \"确定\", \"\", \"\", \"\");  \r\n        }  \r\n    });  \r\n}  \r\n\r\nfunction wxBasicInfo(wxSuccssFn) {\r\n\ttimestamp = Date.parse(new Date());\r\n\tnonceStr = '123456';\r\n\tvar data = {\r\n\t\t'nonce_str': nonceStr,\r\n\t\t'timestamp': timestamp,\r\n\t\t'url': location.href\r\n\t};\r\n\tvar info = mergeInfo('get_wechat_signature', data);\r\n\tajaxFun(info, wxSuccssFn, '');\r\n}\r\n\r\n/**\r\n * mad5加密密码\r\n * @author wxy\r\n * @private\r\n */\r\nfunction md5_pwd(v) {\r\n\tvar authcode = 'WKhioMgQ7OhErmvIuM';\r\n\tvar re = \"###\" + md5(md5(authcode + v));\r\n\treturn re;\r\n}\r\n\r\n/**\r\n * ajax公共方法\r\n * @author wxy\r\n * @private\r\n */\r\nfunction ajaxFun(info, successFun, beforeF) {\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: apiUrl,\r\n\t\tdata: info,\r\n\t\tdataType: 'html',\r\n\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t \tbeforeSend: beforeF,\r\n    \tsuccess: successFun,\r\n    \t// complete: completeFun,\r\n    \terror: errorFun\r\n    })\r\n}\r\n\r\nfunction beforeLoadFun(dom) {\r\n\tvar load = createLoadDom();\r\n\tdom.append(load);\r\n}\r\n\r\nfunction beforeDialogFun() {\r\n\tvar mark = createDialog();\r\n\t$('body').append(mark);\r\n}\r\n\r\nfunction errorFun() {\r\n\t$('.zhezhao, .loading-more').remove();\r\n\t// alert('网络错误，请刷新重试');\r\n}\r\n\r\n// 动态创建loading dom\r\nfunction createLoadDom() {\r\n\tvar d = $('<div />').addClass('load-wrapper loading-more'),\r\n\t\tl = $('<img />').attr('src', localStorage.localStorage_url+'loading.gif'),\r\n\t\ts = $('<span />').text('加载中');\r\n\td.append(l,s);\r\n\treturn d;\r\n}\r\n\r\n// 动态创建遮罩层\r\nfunction createDialog() {\r\n\tvar d = $('<div />').addClass('zhezhao'),\r\n\t\tl = $('<img />').attr('src', localStorage.localStorage_url+'loading.gif');\r\n\td.append(l);\r\n\treturn d;\r\n}\r\n\r\nfunction createEmptyDom() {\r\n\tvar e = $('<div />').addClass('empty'),\r\n\t\ts = $('<span />').text('无更多数据');\r\n\te.append(s);\r\n\treturn e;\r\n}\r\n\r\n/**\r\n * 自动组合api接口所需的信息\r\n * @param {String} [apiName] api接口的方法名\r\n * @param {Object} [data] 传给api的data对象\r\n * @return {Object} [info] 组合以后的info对象\r\n * @author wxy\r\n * @private\r\n */\r\nfunction mergeInfo(apiName, data) {\r\n\tvar appId = wechat,\r\n\t\trandStr = getRandStr(5),\r\n\t\tdate = getCurTime(),\r\n\t\t// timestamp = new Date().getTime(),\r\n\t\tsignature = hex_sha1(hex_sha1(date + randStr) + appId),\r\n\t\tinfo = {\r\n\t\t\t\"header\": {\r\n\t\t\t\t\"timestamp\": date,\r\n\t\t\t\t\"nonce\": randStr,\r\n\t\t\t\t\"signature\": signature\r\n\t\t\t},\r\n\t\t\t\"cmd\": {\r\n\t\t\t\t\"name\": apiName\r\n\t\t\t},\r\n\t\t\t\"data\": data\r\n\t\t};\r\n\tinfo = JSON.stringify(info);\r\n\tinfo = Base64.encode(info);\r\n\tvar arr = [];\r\n\tarr.push(info);\r\n\tarr.push(appId);\r\n\tarr = Base64.encode(JSON.stringify(arr));\r\n\treturn arr;\r\n}\r\n\r\nfunction decodeMsg(msg) {\r\n\tmsg = JSON.parse(Base64.decode(JSON.parse(Base64.decode(msg))[0]));\r\n\treturn msg;\r\n}\r\n\r\n// 管理员登录注册\r\nvar Login = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\twindow.localStorage.setItem('localStorage_url', $('.localStorage-url').val());\r\n\t\t\tmodule.checkUserInfo();\r\n\t\t}, \r\n\r\n\t\tcheckUserInfo: function() {\r\n\t\t\t$('.login-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar username = $('.username').val(),\r\n\t\t\t\t\tpwd = $('.userpwd').val();\r\n\t\t\t\tif(!username) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请输入用户名\",\r\n\t                    duration:5000\r\n\t                });\r\n\t                $('.username').focus();\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!pwd) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请输入密码\",\r\n\t                    duration:5000\r\n\t                });\r\n\t                $('.userpwd').focus();\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tpwd = md5_pwd(pwd);\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'user_name': username,\r\n\t\t\t\t\t'user_pwd': pwd\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('a_login', data);\r\n\t\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar user_id = msg.data.user_id;\r\n\t\t\t\twindow.localStorage.setItem('user_id', user_id);\r\n\t\t\t\twindow.location.href = taskUrl;\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t} \r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n// 管理员任务列表\r\nvar TaskList = (function($){\r\n\tvar type = ['1', '2', '3', '4']; //1、时间 2、类型 3、阶段 4、默认\r\n\tvar curType = 4;\r\n\tvar curPage = 1;\r\n\tvar task_type, stage_id;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function(){\t\t\t  \r\n\t\t\tsetRefreshHeight();\r\n\t\t\tgetTaskParams(module.footerSuccFun);\r\n\t\t\tvar startDate = get_url_hash('startDate');\r\n\t\t\tif(startDate != undefined) {\r\n\t\t\t\tcurType = 1;\r\n\t\t\t}\r\n\t\t\tmodule.getTaskList();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t}, \r\n\r\n\t\tfilterEnsure: function() {\r\n\t\t\t$('.ensure').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tcurType = $(this).attr('data-type'),\r\n\t\t\t\t_id = $(this).attr('data-id');\r\n\t\t\t\tif(curType == '2') {\r\n\t\t\t\t\ttask_type = _id;\r\n\t\t\t\t}else if(curType == '3') {\r\n\t\t\t\t\tstage_id = _id;\r\n\t\t\t\t}\r\n\t\t\t\tcurPage = 1;\r\n\t\t\t\t$('.task-content .aui-list').children().remove();\r\n\t\t\t\tmodule.getTaskList();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetTaskList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'type': curType,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tif(curType == '2') {\r\n\t\t\t\tdata.task_type = task_type;\r\n\t\t\t}\r\n\t\t\tif(curType == '3') {\r\n\t\t\t\tdata.stage_id = stage_id;\r\n\t\t\t}\r\n\t\t\tif(curType == '1') {\r\n\t\t\t\tvar startDate = get_url_hash('startDate'),\r\n\t\t\t\t\tendDate = get_url_hash('endDate');\r\n\t\t\t\tvar timearea = {\r\n\t\t\t\t\t'start_time': startDate,\r\n\t\t\t\t\t'end_time': endDate\r\n\t\t\t\t};\r\n\t\t\t\tdata.timearea = timearea;\r\n\t\t\t}\r\n\t\t\tvar info = mergeInfo('a_task_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.task-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.task-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getTaskList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t        listen:true,\r\n\t\t        distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t    },function(ret){\r\n\t\t    \tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t    \t\t// addFun ajax加载更多方法\r\n\t\t    \t\tscrollState = false;\r\n\t\t    \t\tcurPage++;\r\n\t\t    \t\tmodule.getTaskList();\r\n\t\t    \t}\r\n\t\t    })\r\n\t\t},\r\n\r\n\t\tgetTaskInfo: function() {\r\n\t\t\t$('.task-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar t_id = $(this).attr('data-t-id');\r\n\t\t\t\tvar d = {\r\n\t\t\t\t\t'task_id': t_id\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('get_task_examine_info', d);\r\n\t\t\t\tajaxFun(info, module.successFun1, beforeDialogFun);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsuccessFun1: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _c = $('.copy-dialog-content').clone();\r\n\t\t\t\tvar m = msg.data;\r\n\t\t\t\tvar t = m.title,\r\n\t\t\t\t\tc = m.content,\r\n\t\t\t\t\tstatus = m.status,\r\n\t\t\t\t\tp = m.process,\r\n\t\t\t\t\t_img = m.task_img,\r\n\t\t\t\t\t_explain = m.task_examine_explain;\r\n\t\t\t\t_c.find('.task-name').text(t);\r\n\t\t\t\t_c.find('.popup-task-content').text(c);\r\n\t\t\t\tif(_img != 'null') {\r\n\t\t\t\t\t_c.find('.task-img-content>img').attr('src', _img);\r\n\t\t\t\t\t_c.find('.task-img-item').removeAttr('style');\r\n\t\t\t\t}\r\n\t\t\t\tif(_explain != null) {\r\n\t\t\t\t\t_c.find('.task-explain-content').text(_explain);\r\n\t\t\t\t\t_c.find('.task-explain-item').removeAttr('style');\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i in p) {\r\n\t\t\t\t\tvar _copy = $('.item-copy').clone();\r\n\t\t\t\t\t_copy.find('.task-step').text(p[i].stage_name+'执行人：');\r\n\t\t\t\t\t_copy.find('.task-step-name').text(p[i].account_name);\r\n\t\t\t\t\tvar _a = $('<a />').attr('href', 'tel:'+p[i].mobile).text(p[i].mobile);\r\n\t\t\t\t\t_copy.find('.task-step-mob').append(_a);\r\n\t\t\t\t\t_c.find('.aui-list').append(_copy.html());\r\n\t\t\t\t}\r\n\t\t\t\tvar dialog = new auiDialog();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:_c.html(),\r\n\t\t            buttons:['关闭']\r\n\t\t        },function(ret){\r\n\t\t    \t\tif(ret.buttonIndex == 1) {\r\n\t\t    \t\t\tdialog.remove();\r\n\t                    $('.aui-mask-in').remove();\r\n\t\t    \t\t}\r\n\t\t        });\r\n\t\t      \tif(_img != null) {\r\n\t\t      \t\t$('.aui-dialog .task-img-content>img').fsgallery();\r\n\t\t      \t}\r\n\t\t        // $(\"body\").click(function(e) {\r\n\t\t        // \talert(e.target.className);\r\n\t\t        // \te.stopPropagation();\r\n\t         //        var checkclass = e.target.className;\r\n\t         //        if (checkclass.indexOf(\"aui-mask-in\") >= 0){\r\n\t         //            dialog.remove();\r\n\t         //            $('.aui-mask-in').remove();\r\n\t         //        }\r\n\t         //    });\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-t-id': list[i].t_id,\r\n\t\t\t\t\t\t\t'data-stage-id': list[i].t_stage_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.aui-list-item-title').text(list[i].t_title);\r\n\t\t\t\t\t\t_clone.find('.task-date').text(list[i].create_time);\r\n\t\t\t\t\t\t_clone.find('.task-progress').text(list[i].stage_name);\r\n\t\t\t\t\t\t$('.task-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getTaskInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.task-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilterPopEvt: function() {\r\n\t\t\t$('.item-filter .aui-popup-content').find('.aui-list-item').each(function(){\r\n\t\t\t\tvar type = $(this).attr('data-type');\r\n\t\t\t\tif(type == 'filter-date') {\r\n\t\t\t\t\t$(this).click(function(e){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tpopup.hide(document.getElementById(\"filter-type\"));\r\n\t\t\t\t\t\twindow.location.href=$(this).attr('data-url');\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(type == 'filter-type') {\r\n\t\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\t\ttrigger: '.aui-list-item-inner.' + type, \r\n\t\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\t\twheels: [{data: typeList}]\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if(type == 'filter-stage') {\r\n\t\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\t\ttrigger: '.aui-list-item-inner.' + type, \r\n\t\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\t\twheels: [{data: stageList}]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tmodule.filterEnsure();\r\n\t\t},\r\n\r\n\t\tfooterSuccFun: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tstageList = msg.data.stage;\r\n\t\t\t\ttypeList = msg.data.task_type;\r\n\t\t\t\taccount_type = msg.data.account_type;\r\n\t\t\t\tmodule.filterPopEvt();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n// 时间查询\r\nvar DateSearch = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\t$('.search-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbeforeDialogFun();\r\n\t\t\t\tmodule.checkDateInfo();\r\n\t\t\t});\r\n\t\t}, \r\n\r\n\t\tcheckDateInfo: function() {\r\n\t\t\tvar startDate = $('#startDate').text(),\r\n\t\t\t\tendDate = $('#endDate').text();\r\n\t\t\tif(startDate == '请选择') {\r\n\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\ttoast.fail({\r\n\t                title:\"请选择开始时间\",\r\n\t                duration:5000\r\n\t            });\r\n\t            return false;\r\n\t\t\t}\r\n\t\t\tif(endDate == '请选择') {\r\n\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\ttoast.fail({\r\n\t                title:\"请选择结束时间\",\r\n\t                duration:5000\r\n\t            });\r\n\t            return false;\r\n\t\t\t}\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t $('.zhezhao').remove();\r\n\t\t\t\twindow.location.href = searchUrl + '&startDate='+startDate+'&endDate='+endDate;\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n// 新加任务\r\nvar Newtask = (function($){\r\n\tvar maxStep = 6;\r\n\tvar dialog = new auiDialog();\r\n\tvar toast = new auiToast();\r\n\tvar _parent;\r\n\tvar imgSrc;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tgetTaskParams(module.taskParamsSucc);\r\n\t\t\tmodule.addStageStep();\r\n\t\t\tmodule.createTask();\r\n\t\t\twxBasicInfo(module.wxSuccssFn);\r\n\t\t}, \r\n\r\n\t\tcreateTask: function() {\r\n\t\t\t$('.publish-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar task_name = $('input[name=\"taskname\"]').val(),\r\n\t\t\t\t\ttask_type = $('.select-task-type').attr('data-id'),\r\n\t\t\t\t\tcontent = $('textarea[name=\"tcontent\"]').val();\r\n\t\t\t\tif(!task_name) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入任务名\",\r\n\t\t                duration:5000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!task_type || task_type == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请选择任务类型\",\r\n\t\t                duration:5000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!content) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入任务描述\",\r\n\t\t                duration:5000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n \t\t\t\tvar _l = module.getStageList();\r\n \t\t\t\tif(_l) {\r\n \t\t\t\t\tvar data = {\r\n \t\t\t\t\t\t'title': task_name,\r\n \t\t\t\t\t\t'content': content,\r\n \t\t\t\t\t\t'task_type': task_type,\r\n \t\t\t\t\t\t'user_id': localStorage.user_id,\r\n \t\t\t\t\t\t'process': _l\r\n \t\t\t\t\t};\r\n \t\t\t\t}else{\r\n \t\t\t\t\treturn false;\r\n \t\t\t\t}\r\n \t\t\t\tif(imgSrc != undefined) {\r\n \t\t\t\t\tdata.task_img = imgSrc;\r\n \t\t\t\t}\r\n \t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('dialog-inner-content').innerHTML,\r\n\t\t            buttons:['确认', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t                var info = mergeInfo('create_task', data);\r\n\t\t\t\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\twxSuccssFn: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar signature = msg.data.signature;\r\n\t\t\t\twx.config({  \r\n\t\t\t        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。  \r\n\t\t\t       \tappId: appid, // 必填，公众号的唯一标识  \r\n\t\t\t        timestamp: timestamp, // 必填，生成签名的时间戳  \r\n\t\t\t        nonceStr: nonceStr, // 必填，生成签名的随机串  \r\n\t\t\t        signature: signature,// 必填，签名，见附录1  \r\n\t\t\t        jsApiList: ['chooseImage', 'uploadImage'], // 必填，需要使用的JS接口列表，所有JS接口列表见附录2  \r\n\t\t\t    });  \r\n\t\t\t    wx.ready(function(){\r\n\t\t\t    \tvar images = {\r\n\t\t                localId: [],\r\n\t\t                serverId: []\r\n\t\t            };\r\n\t\t\t    \t$('.select-img').click(function(e){\r\n\t\t\t    \t\te.stopPropagation();\r\n\t\t\t    \t\twx.chooseImage({\r\n\t\t                    success: function(res) {\r\n\t\t                        var localIds = res.localIds;\r\n\t\t                        if(localIds.length > 1) {\r\n\t\t\t\t                  \ttoast.fail({\r\n\t\t\t\t\t\t\t            title:\"只能选择一张图片\",\r\n\t\t\t\t\t\t\t            duration:5000\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t                }else{\r\n\t\t\t\t                \tgetImgInfo(localIds);\r\n\t\t\t\t                }\r\n\t\t                    }\r\n\t\t                });\r\n\t\t\t    \t});\r\n\r\n\t\t\t    \tvar getImgInfo = function(localIds) {\r\n\t\t\t    \t\tvar localId = localIds.pop();\r\n\t\t\t    \t\twx.getLocalImgData({\r\n\t\t\t\t\t\t    localId: localId, // 图片的localID\r\n\t\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t\t        var localData = res.localData; // localData是图片的base64数据，可以用img标签显示\r\n\t\t\t\t\t\t        var u = navigator.userAgent;\r\n\t\t\t\t\t\t  \t\tvar isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端\t\t\r\n\t\t\t\t\t\t   \t\tif(isAndroid) {\r\n\t\t\t\t\t\t   \t\t\tvar base_data = localData;\r\n\t\t\t\t\t\t   \t\t\tlocalData = 'data:image/jgp;base64,' + base_data;\r\n\t\t\t\t\t\t   \t\t}\r\n\t\t\t\t\t\t   \t\timgSrc = localData;\r\n\t\t\t\t\t\t   \t\t$('.select-img').text('已选择').attr('data-status', '1');\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t\t    \t}\r\n\t\t\t    \t// var syncUpload = function(localIds) {\r\n\t\t      //           var localId = localIds.pop();\r\n\t\t      //           wx.uploadImage({\r\n\t\t      //               localId: localId,\r\n\t\t      //               isShowProgressTips: 1,\r\n\t\t      //               success: function(res) {\r\n\t\t      //                   var serverId = res.serverId; \r\n\t\t      //                   console.log(serverId);\r\n\t\t      //                   if (localIds.length > 0) {\r\n\t\t      //                       syncUpload(localIds);\r\n\t\t      //                   }\r\n\t\t      //               }\r\n\t\t      //           });\r\n\t\t      //       };\r\n\t\t\t    })\r\n\t\t\t    wx.error(function(res) {\r\n\t\t            alert(res.errMsg);\r\n\t\t        });\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskParamsSucc: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tstageList = msg.data.stage;\r\n\t\t\t\ttypeList = msg.data.task_type;\r\n\t\t\t\taccount_type = msg.data.account_type;\r\n\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\ttrigger: '.select-task-type', \r\n\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\twheels: [{data: typeList}]\r\n\t\t\t\t});\r\n\t\t\t\tvar _copy = $('.copy-content');\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor(var i in stageList) {\r\n\t\t\t\t\tvar _opt = $('<option />');\r\n\t\t\t\t\t_opt.val(i).text(stageList[i]);\r\n\t\t\t\t\t_copy.find('.s-step').append(_opt);\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t\tmaxStep = num;\r\n\t\t\t\tfor(var j in account_type) {\r\n\t\t\t\t\tvar _opt1 = $('<option />');\r\n\t\t\t\t\t_opt1.val(j).text(account_type[j]);\r\n\t\t\t\t\t_copy.find('.s-level').append(_opt1);\r\n\t\t\t\t}\r\n\t\t\t\t_parent = $('.copy-content');\r\n\t\t\t\tmodule.getAccount(_copy.find('.s-level').val());\r\n\t\t\t}\r\n\t\t}, \r\n\r\n\t\tgetAccount: function(t) {\r\n\t\t\tvar data = {\r\n\t\t\t\t'account_type': t\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_accounts', data);\r\n\t\t\tajaxFun(info, module.accountSucc , '');\r\n\t\t},\r\n\r\n\t\tselectLevelEvt: function() {\r\n\t\t\t$('.step-list .s-level').change(function(){\r\n\t\t\t\tvar t = $(this).val();\r\n\t\t\t\t_parent = $(this).parents('.stage-item');\r\n\t\t\t\tmodule.getAccount(t);\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\taccountSucc: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data;\r\n\t\t\t\t_parent.find('.s-user>option').remove();\r\n\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\tvar _opt = $('<option />');\r\n\t\t\t\t\t_opt.val(list[i]['a_id']).text(list[i]['a_name']);\r\n\t\t\t\t\t_parent.find('.s-user').append(_opt);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(d) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(d);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tdialog.remove();\r\n\t            $('.aui-mask-in').remove();\r\n\t            window.location.href = listUrl; \r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetStageList: function() {\r\n\t\t\tvar _list = $('.step-list').children();\r\n\t\t\tif(_list.length) {\r\n\t\t\t\tvar arr = {};\r\n\t\t\t\t_list.each(function(){\r\n\t\t\t\t\tvar _s_step = $(this).find('.s-step'),\r\n\t\t\t\t\t\t_s_level = $(this).find('.s-level'),\r\n\t\t\t\t\t\t_s_user = $(this).find('.s-user');\r\n\t\t\t\t\tvar b = {};\r\n\t\t\t\t\tvar _step_id = _s_step.val(),\r\n\t\t\t\t\t\t_level_id = _s_level.val(),\r\n\t\t\t\t\t\t_user_id = _s_user.val(),\r\n\t\t\t\t\t\t_user_text = _s_user.find('option:selected').text();\r\n\t\t\t\t\tb.a_id = _user_id;\r\n\t\t\t\t\tb.a_name = _user_text;\r\n\t\t\t\t\tb.a_type = _level_id;\r\n\t\t\t\t\tarr[_step_id] = b;\r\n\t\t\t\t});\r\n\t\t\t\tvar len = 0;\r\n\t\t\t\tfor(var i in arr) {\r\n\t\t\t\t\tlen++;\r\n\t\t\t\t}\r\n\t\t\t\tif(_list.length > len) {\r\n\t\t\t\t\talert('阶段不能重复，请重新选择');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn arr;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\talert('任务设置不能为空');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddStageStep: function() {\r\n\t\t\t$('.add-stage-btn').bind('click', function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar _list = $('.step-list').children();\r\n\t\t\t\tif(_list.length < maxStep) {\r\n\t\t\t\t\tvar _clone = $('.copy-content').clone();\r\n\t\t\t\t\t$('.step-list').append(_clone.html());\r\n\t\t\t\t\tmodule.removeStageStep();\r\n\t\t\t\t\tmodule.selectLevelEvt();\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert('已达到最大流程设置');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tremoveStageStep: function() {\r\n\t\t\t$('.step-list .stage-rm-btn').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t$(this).parent().remove();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n//任务审核\r\nvar Review = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar dialog = new auiDialog();\r\n\tvar curPage = 1;\r\n\tvar scrollState = false;\r\n\tvar t_id;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tsetRefreshHeight();\r\n\t\t\tmodule.getReviewList();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t}, \r\n\r\n\t\tgetReviewInfo: function() {\r\n\t\t\t$('.review-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tt_id = $(this).attr('data-t-id');\r\n\t\t\t\tvar d = {\r\n\t\t\t\t\t'task_id': t_id\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('get_task_examine_info', d);\r\n\t\t\t\tajaxFun(info, module.successFun1, beforeDialogFun);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetReviewList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('task_examine_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.review-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tupdateStatus: function(s, c) {\r\n\t\t\tvar data = {\r\n\t\t\t\t'task_id': t_id,\r\n\t\t\t\t'examine_explain': c,\r\n\t\t\t\t'status': s\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('update_task_status', data);\r\n\t\t\tajaxFun(info, module.successFun2, beforeDialogFun);\r\n\t\t},\r\n\r\n\t\tsuccessFun2: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"操作成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t\t\tdialog.remove();\r\n\t            $('.aui-mask-in').remove();\r\n\t            window.location.reload(); \r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun1: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _c = $('.copy-dialog-content').clone();\r\n\t\t\t\tvar m = msg.data;\r\n\t\t\t\tvar t = m.title,\r\n\t\t\t\t\tc = m.content,\r\n\t\t\t\t\tstatus = m.status,\r\n\t\t\t\t\tp = m.process,\r\n\t\t\t\t\t_img = m.task_img,\r\n\t\t\t\t\t_explain = m.task_examine_explain;\r\n\t\t\t\t_c.find('.task-name').text(t);\r\n\t\t\t\t_c.find('.popup-task-content').text(c);\r\n\t\t\t\tif(_img != 'null') {\r\n\t\t\t\t\t_c.find('.task-img-content>img').attr('src', _img);\r\n\t\t\t\t\t_c.find('.task-img-item').removeAttr('style');\r\n\t\t\t\t}\r\n\t\t\t\tif(_explain != null) {\r\n\t\t\t\t\t_c.find('.task-explain-content').text(_explain);\r\n\t\t\t\t\t_c.find('.task-explain-item').removeAttr('style');\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i in p) {\r\n\t\t\t\t\tvar _copy = $('.item-copy').clone();\r\n\t\t\t\t\t_copy.find('.task-step').text(p[i].stage_name+'执行人：');\r\n\t\t\t\t\t_copy.find('.task-step-name').text(p[i].account_name);\r\n\t\t\t\t\tvar _a = $('<a />').attr('href', 'tel:'+p[i].mobile).text(p[i].mobile);\r\n\t\t\t\t\t_copy.find('.task-step-mob').append(_a);\r\n\t\t\t\t\t_c.find('.remark-item').before(_copy.html());\r\n\t\t\t\t}\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:_c.html(),\r\n\t\t            buttons:['关闭', '审核通过', '审核不通过', '同意终止', '不同意终止']\r\n\t\t        },function(ret){\r\n\t\t        \tvar c = $('.aui-dialog #review-remark').val();\r\n\t\t        \tif(!c && ret.buttonIndex != 1) {\r\n\t\t        \t\talert('请输入备注');\r\n\t\t                return false;\r\n\t\t\t        }\r\n\t\t        \tvar _index =ret.buttonIndex;\r\n\t\t        \tvar s;\r\n\t\t        \tif(_index == 3 || _index == 5) {\r\n\t\t        \t\ts = 1;\r\n\t\t        \t}else if(_index == 2) {\r\n\t\t        \t\ts = 4;\r\n\t\t        \t}else if(_index == 4){\r\n\t\t        \t\ts = 5;\r\n\t\t        \t}\r\n\t\t        \tif(_index != 1) {\r\n\t\t        \t\tmodule.updateStatus(s, c);\r\n\t\t        \t}else{\r\n\t\t        \t\tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t        \t}  \r\n\t\t        });\r\n\t\t        if(_img != 'null') {\r\n\t\t      \t\t$('.aui-dialog .task-img-content>img').fsgallery();\r\n\t\t      \t}\r\n\t\t\t\tif(status == 2) {\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn[button-index=3]').hide();\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn[button-index=4]').hide();\r\n\t\t\t\t}else if (status == 3) {\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn[button-index=1]').hide();\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn[button-index=2]').hide();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn').hide();\r\n\t\t\t\t\t$('.aui-dialog-footer .aui-dialog-btn[button-index=0]').show();\r\n\t\t\t\t}\r\n\t\t        $(\"body\").click(function(e) {\r\n\t\t        \te.stopPropagation();\r\n\t                var checkclass = e.target.className ;  \r\n\t                if (checkclass.indexOf(\"aui-mask-in\") >= 0){\r\n\t                    dialog.remove();\r\n\t                    $('.aui-mask-in').remove();\r\n\t                }\r\n\t            });\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-t-id': list[i].t_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.aui-list-item-title').text(list[i].t_title);\r\n\t\t\t\t\t\t_clone.find('.task-date').text(list[i].create_time);\r\n\t\t\t\t\t\t_clone.find('.task-progress').text(list[i].task_status);\r\n\t\t\t\t\t\t$('.review-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getReviewInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.review-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.review-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getReviewList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t        listen:true,\r\n\t\t        distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t    },function(ret){\r\n\t\t    \tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t    \t\t// addFun ajax加载更多方法\r\n\t\t    \t\tscrollState = false;\r\n\t\t    \t\tcurPage++;\r\n\t\t    \t\tmodule.getReviewList();\r\n\t\t    \t}\r\n\t\t    })\r\n\t\t},\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n// Footer \r\nvar Specfooter = (function($){\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.addActiveFun();\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tif($(this).index() != 0) {\r\n\t\t\t\t\twindow.location.href = urlArr[$(this).index()];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, \r\n\r\n\t\taddActiveFun: function() {\r\n\t\t\tvar _index = $('input[name=\"footerActive\"]').val();\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').eq(_index).addClass('aui-active');\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n// Footer \r\nvar Footer = (function($){\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.addActiveFun();\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tif($(this).hasClass('aui-active')) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\twindow.location.href = urlArr[$(this).index()];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, \r\n\r\n\t\taddActiveFun: function() {\r\n\t\t\tvar _index = $('input[name=\"footerActive\"]').val();\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').eq(_index).addClass('aui-active');\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n//employee \r\nvar Employee = (function($){\r\n\tvar curPage = 1;\r\n\tvar curType = 1;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tsetRefreshHeight();\r\n\t\t\tmodule.getEmployeeList();\r\n\t\t\tmodule.tabSelectEvt();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t}, \r\n\r\n\t\tgetReviewInfo: function() {\r\n\t\t\t$('.employee-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar t_id = $(this).attr('data-t-id');\r\n\t\t\t\twindow.location.href = detailUrl + '&task_id='+t_id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\ttabSelectEvt: function() {\r\n\t\t\t$('#footer').children('.aui-bar-tab-item').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar s = $(this).attr('data-id');\r\n\t\t\t\tif($(this).hasClass('aui-active')) return;\r\n\t\t\t\t$('#footer').children('.aui-bar-tab-item').removeClass('aui-active');\r\n\t\t\t\t$(this).addClass('aui-active');\r\n\t\t\t\tcurType = s;\r\n\t\t\t\tcurPage = 1;\r\n\t\t\t\t$('.employee-content .aui-list').children().remove();\r\n\t\t\t\tmodule.getEmployeeList();\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetEmployeeList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'type': curType,\r\n\t\t\t\t'account_id': localStorage.account_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('account_task_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.employee-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-t-id': list[i].task_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.aui-list-item-title').text(list[i].task_title);\r\n\t\t\t\t\t\t_clone.find('.task-date').text(list[i].create_time);\r\n\t\t\t\t\t\t_clone.find('.task-progress').text(list[i].stage);\r\n\t\t\t\t\t\t$('.employee-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getReviewInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.employee-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.employee-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getEmployeeList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getEmployeeList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar Employeedetail = (function($){\r\n\tvar dialog = new auiDialog();\r\n\tvar toast = new auiToast();\r\n\tvar maxImgNum = 9;\r\n\tvar p_id, a_id, t_id, t_status, p_status = false;\r\n\tvar imgcodes = [];\r\n\tvar imgDialog = [];\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.getDetailInfo();\r\n\t\t}, \r\n\r\n\t\tgetDetailInfo: function() {\r\n\t\t\tvar task_id = get_url_hash('task_id');\r\n\t\t\tvar data = {\r\n\t\t\t\t'task_id': task_id\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_account_task_info', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _p = msg.data.process_list,\r\n\t\t\t\t\t_t = msg.data.task_title,\r\n\t\t\t\t\t_c = msg.data.task_content,\r\n\t\t\t\t\t_img = msg.data.task_img,\r\n\t\t\t\t\t_explain = msg.data.task_examine_plain;\r\n\t\t\t\tt_id = msg.data.task_id;\r\n\t\t\t\tt_status = msg.data.task_status;\r\n\t\t\t\tp_id = msg.data.now_process_id;\r\n\t\t\t\ta_id = msg.data.account_id;\r\n\t\t\t\t$('.task_title').text(_t);\r\n\t\t\t\t$('.task_content').text(_c);\r\n\t\t\t\tif(_img != 'null' && !_img) {\r\n\t\t\t\t\t$('.task-info img').attr('src', _img).fsgallery();\r\n\t\t\t\t\t$('.task-info').removeClass('aui-hide');\r\n\t\t\t\t}\r\n\t\t\t\tif(_explain != null) {\r\n\t\t\t\t\t$('.task-explain-content').text(_explain);\r\n\t\t\t\t\t$('.task-explain').removeClass('aui-hide');\r\n\t\t\t\t}\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor(var i in _p) {\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t\tvar _copy;\r\n\t\t\t\t\tif(i%2 == 0) {\r\n\t\t\t\t\t\t_copy= $('.copy-item-right').clone();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\t_copy = $('.copy-item-left').clone();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_copy.find('.tree-item').css('top', (i*50)+'px');\r\n\t\t\t\t\t_copy.find('.item-stage').text(_p[i].stage_name);\r\n\t\t\t\t\t_copy.find('.item-user').text(_p[i].account_name);\r\n\t\t\t\t\t_copy.find('.item-date').text(_p[i].start_time ? _p[i].start_time : '');\r\n\t\t\t\t\tif(_p[i]['img'][0]) {\r\n\t\t\t\t\t\t_copy.find('.item-img>img').attr({'src': _p[i]['img'][0], 'data-index': i});\r\n\t\t\t\t\t}\r\n\t\t\t\t\timgDialog.push(_p[i]['img']);\r\n\t\t\t\t\tif(_p[i].start_time == 0) {\r\n\t\t\t\t\t\t_copy.find('.tree-item').addClass('completed');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$('.tree-list').append(_copy.html());\r\n\t\t\t\t}\r\n\t\t\t\tif(_p[num-1].process_id == p_id) {\r\n\t\t\t\t\tp_status = true;\r\n\t\t\t\t}\r\n\t\t\t\tmodule.imgDialogEvt();\r\n\t\t\t\tmodule.tabDisplayEvt();\r\n\t\t\t\t$('.tree-list').css('height', (80*num)+'px');\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\timgDialogEvt: function() {\r\n\t\t\t$('.tree-list .item-img>img').click(function(){\r\n\t\t\t\tif($(this).attr('data-index') != undefined) {\r\n\t\t\t\t\t$('#task-img-dialog .img-popup-content').children().remove();\r\n\t\t\t\t\tvar _index = $(this).attr('data-index');\r\n\t\t\t\t\tvar list = imgDialog[_index];\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tif(list[i]) {\r\n\t\t\t\t\t\t\tvar _i = $('<img />').attr('src', list[i]);\r\n\t\t\t\t\t\t\t$('#task-img-dialog .img-popup-content').append(_i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('#task-img-dialog .img-popup-content').text('还未上传图片');\r\n\t\t\t\t}\r\n\t\t\t\tdialog.alert({\r\n\t\t\t        title:\"\",\r\n\t\t\t        msg:document.getElementById('task-img-dialog').innerHTML,\r\n\t\t\t        buttons:['关闭']\r\n\t\t\t    },function(ret){\r\n\t\t\t    \tif(ret.buttonIndex == 1){\r\n\t\t\t       \t\tdialog.remove();\r\n\t\t           \t\t$('.aui-mask-in').remove();\t\r\n\t\t\t       }\r\n\t\t\t    });\r\n\t\t\t    $('.aui-dialog-body .img-popup-content img').fsgallery();\r\n \t\t\t});\r\n\t\t},\r\n\r\n\t\ttabDisplayEvt: function() {\r\n\t\t\tif(t_status == 1) {\r\n\t\t\t\tmodule.taskChange();\r\n\t\t\t\tmodule.taskOver();\r\n\t\t\t\tif(localStorage.account_id == a_id) {\r\n\t\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(0).css('display', 'table-cell');\r\n\t\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(2).css('display', 'table-cell');\r\n\t\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(3).css('display', 'table-cell');\r\n\t\t\t\t\tmodule.addImgDialog();\r\n\t\t\t\t\tif(p_status) {\r\n\t\t\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(4).css('display', 'table-cell');\r\n\t\t\t\t\t\tmodule.taskReview();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(1).css('display', 'table-cell');\r\n\t\t\t\t\t\tmodule.taskTransfer();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(t_status == 2) {\r\n\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(5).css('display', 'table-cell');\r\n\t\t\t}else if(t_status == 3) {\r\n\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(6).css('display', 'table-cell');\r\n\t\t\t}else if(t_status == 4) {\r\n\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(7).css('display', 'table-cell');\r\n\t\t\t}else if(t_status == 5) {\r\n\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(8).css('display', 'table-cell');\r\n\t\t\t}else if(t_status == 6) {\r\n\t\t\t\t$('.detail-footer>.aui-bar-tab-item').eq(9).css('display', 'table-cell');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twxSuccssFn: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar signature = msg.data.signature;\r\n\t\t\t\twx.config({  \r\n\t\t\t        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。  \r\n\t\t\t       \tappId: appid, // 必填，公众号的唯一标识  \r\n\t\t\t        timestamp: timestamp, // 必填，生成签名的时间戳  \r\n\t\t\t        nonceStr: nonceStr, // 必填，生成签名的随机串  \r\n\t\t\t        signature: signature,// 必填，签名，见附录1  \r\n\t\t\t        jsApiList: ['chooseImage', 'uploadImage'], // 必填，需要使用的JS接口列表，所有JS接口列表见附录2  \r\n\t\t\t    });  \r\n\t\t\t    wx.ready(function(){\r\n\t\t\t    \tvar images = {\r\n\t\t                localId: [],\r\n\t\t                serverId: []\r\n\t\t            };\r\n\t\t\t    \t$('.aui-dialog-body .chooseImgBtn').click(function(e){\r\n\t\t\t    \t\te.stopPropagation();\r\n\t\t\t    \t\twx.chooseImage({\r\n\t\t                    success: function(res) {\r\n\t\t                        var localIds = res.localIds;\r\n\t\t                        var len = $('.aui-dialog-body .img-content').children().length;\r\n\t\t                        if(localIds.length > maxImgNum || (len + localIds.length) > (maxImgNum+1)) {\r\n\t\t                        \talert('最多上传9张图片');\r\n\t\t                        }else{\r\n\t\t                        \t getImgInfo(localIds, 0);\r\n\t\t                        }\r\n\t\t                    }\r\n\t\t                });\r\n\t\t\t    \t});\r\n\r\n\t\t\t    \tvar getImgInfo = function(localIds, id) {\r\n\t\t\t    \t\tvar localId = localIds.pop();\r\n\t\t\t    \t\twx.getLocalImgData({\r\n\t\t\t\t\t\t    localId: localId, // 图片的localID\r\n\t\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t\t        var localData = res.localData; // localData是图片的base64数据，可以用img标签显示\r\n\t\t\t\t\t\t        var u = navigator.userAgent;\r\n\t\t\t\t\t\t  \t\tvar isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端\r\n\t\t\t\t\t\t   \t\tif(isAndroid) {\r\n\t\t\t\t\t\t   \t\t\tvar base_data = localData;\r\n\t\t\t\t\t\t   \t\t\tlocalData = 'data:image/jgp;base64,' + base_data;\r\n\t\t\t\t\t\t   \t\t}\r\n\t\t\t\t\t\t   \t\tvar _i = $('<img />').attr({'src': localData, 'data-id': id}).on('click', function(e){\r\n\t\t\t\t\t\t   \t\t\te.stopPropagation();\r\n\t\t\t\t\t\t   \t\t\tmodule.changeImage($(this));\r\n\t\t\t\t\t\t   \t\t});\r\n\t\t\t\t\t\t   \t\timgcodes.push(localData);\r\n\t\t\t\t\t\t   \t\t$('.aui-dialog-body .img-content').append(_i);\r\n\t\t\t\t\t\t   \t\tif(localIds.length>0) {\r\n\t\t\t\t\t\t   \t\t\tid++;\r\n\t\t\t\t\t\t   \t\t\tgetImgInfo(localIds, id);\r\n\t\t\t\t\t\t   \t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t\t    \t}\r\n\t\t\t    })\r\n\t\t\t    wx.error(function(res) {\r\n\t\t            alert(res.errMsg);\r\n\t\t        });\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tchangeImage: function(d) {\r\n\t\t\twx.ready(function(){\r\n\t\t\t\twx.chooseImage({\r\n\t\t           \tsuccess: function(res) {\r\n\t\t           \t    var localIds = res.localIds;\r\n\t\t           \t    if(localIds.length > 1) {\r\n\t\t                  \ttoast.fail({\r\n\t\t\t\t\t            title:\"只能选择一张图片\",\r\n\t\t\t\t\t            duration:5000\r\n\t\t\t\t\t        });\r\n\t\t                }else{\r\n\t\t                   \tchangeImgInfo(localIds);\r\n\t\t               \t}\r\n\t\t            }\r\n\t\t        });\r\n\r\n\t\t        var changeImgInfo = function(localIds) {\r\n\t\t\t    \tvar localId = localIds.pop();\r\n\t\t\t    \twx.getLocalImgData({\r\n\t\t\t\t\t    localId: localId, // 图片的localID\r\n\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t        var localData = res.localData; // localData是图片的base64数据，可以用img标签显示\r\n\t\t\t\t\t        var u = navigator.userAgent;\r\n\t\t\t\t\t\t  \tvar isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端\t\t\r\n\t\t\t\t\t\t   \tif(isAndroid) {\r\n\t\t\t\t\t\t   \t\tvar base_data = localData;\r\n\t\t\t\t\t\t   \t\tlocalData = 'data:image/jgp;base64,' + base_data;\r\n\t\t\t\t\t\t   \t}\r\n\t\t\t\t\t   \t\td.attr('src', localData);\r\n\t\t\t\t\t   \t\tvar id = d.attr('data-id');\r\n\t\t\t\t\t   \t\timgcodes.splice(id, 1);\r\n\t\t\t\t\t   \t\timgcodes.push(localData);\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t});\r\n\t\t\t    }\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tuploadImage: function() {\r\n\t\t\tif(imgcodes.length) {\r\n\t\t\t\tvar data = {\r\n\t\t\t        'process_id': p_id,\r\n\t\t\t        'account_id': localStorage.account_id,\r\n\t\t\t        'imgcodes': imgcodes\r\n\t\t\t    };\r\n\t\t\t    var info = mergeInfo('update_process_imgs', data);\r\n\t\t\t\tajaxFun(info, module.uploadSuccessFn, beforeDialogFun);\r\n\t\t\t}else{\r\n\t\t\t\ttoast.fail({\r\n\t\t\t\t    title:\"请先添加图片再上传\",\r\n\t\t\t\t    duration:5000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tuploadSuccessFn: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"照片上传成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t        window.location.reload(); \r\n\t\t\t}else{\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddImgDialog: function() {\r\n\t\t\t$('.task-img-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t\t        title:\"\",\r\n\t\t\t        msg:document.getElementById('img-dialog').innerHTML,\r\n\t\t\t        buttons:['上传', '关闭']\r\n\t\t\t    },function(ret){\r\n\t\t\t    \tif(ret.buttonIndex == 1){\r\n\t\t\t       \t\tmodule.uploadImage();\r\n\t\t\t       }else{\r\n\t\t\t       \tdialog.remove();\r\n\t\t\t       \timgcodes = [];\r\n\t\t           \t$('.aui-mask-in').remove();\r\n\t\t\t       }\r\n\t\t\t    })\r\n\t\t\t    wxBasicInfo(module.wxSuccssFn);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\ttaskTransfer: function() {\r\n\t\t\t$('.task-transfer-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('task-transfer-dialog').innerHTML,\r\n\t\t            buttons:['确认', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t            \tvar data = {\r\n\t\t            \t\t'process_id': p_id,\r\n\t\t            \t\t'task_id': t_id\r\n\t\t            \t};\r\n\t\t                var info = mergeInfo('process_next', data);\r\n\t\t\t\t\t\tajaxFun(info, module.successFun1, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tsuccessFun1: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"流转提交成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t        window.location.href = taskUrl;\r\n\t\t\t}else{\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskChange: function() {\r\n\t\t\t$('.task-change-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('task-change-dialog').innerHTML,\r\n\t\t            buttons:['提交', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t            \tif(!$('.aui-dialog .change-content>textarea').val()) {\r\n\t\t       \r\n\t\t\t\t\t        alert('请输入变更原因');\r\n\t\t\t\t\t        return false;\r\n\t\t            \t}\r\n\t\t            \tvar data = {\r\n\t\t            \t\t'process_id': p_id,\r\n\t\t            \t\t'task_id': t_id,\r\n\t\t            \t\t'examine_content': $('.aui-dialog .change-content>textarea').val()\r\n\t\t            \t};\r\n\t\t                var info = mergeInfo('change_process_account', data);\r\n\t\t\t\t\t\tajaxFun(info, module.successFun2, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsuccessFun2: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"变更提交成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t        window.location.reload(); \r\n\t\t\t}else{\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun3: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"中止提交成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t        window.location.reload(); \r\n\t\t\t}else{\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsuccessFun4: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\ttoast.success({\r\n\t\t            title:\"申请提交成功\",\r\n\t\t            duration:5000\r\n\t\t        });\r\n\t\t        window.location.reload(); \r\n\t\t\t}else{\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\ttaskOver: function() {\r\n\t\t\t$('.task-over-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('task-over-dialog').innerHTML,\r\n\t\t            buttons:['提交', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t            \tif(!$('.aui-dialog .over-content>textarea').val()) {\r\n\t\t            \t\ttoast.fail({\r\n\t\t\t\t\t            title:\"请输入中止原因\",\r\n\t\t\t\t\t            duration:5000\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t        return false;\r\n\t\t            \t}\r\n\t\t            \tvar data = {\r\n\t\t            \t\t'process_id': p_id,\r\n\t\t            \t\t'task_id': t_id,\r\n\t\t            \t\t'examine_content': $('.aui-dialog .over-content>textarea').val(),\r\n\t\t            \t\t'type': 2\r\n\t\t            \t};\r\n\t\t                var info = mergeInfo('apply_examine_task', data);\r\n\t\t\t\t\t\tajaxFun(info, module.successFun3, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\ttaskReview: function() {\r\n\t\t\t$('.task-review-btn').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('task-review-dialog').innerHTML,\r\n\t\t            buttons:['确认', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t            \tif(!$('.aui-dialog .review-content>textarea').val()) {\r\n\t\t            \t\ttoast.fail({\r\n\t\t\t\t\t            title:\"请输入审核原因\",\r\n\t\t\t\t\t            duration:5000\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t        return false;\r\n\t\t            \t}\r\n\t\t            \tvar data = {\r\n\t\t            \t\t'process_id': p_id,\r\n\t\t            \t\t'task_id': t_id,\r\n\t\t            \t\t'examine_content': $('.aui-dialog .review-content>textarea').val(),\r\n\t\t            \t\t'type': 1\r\n\t\t            \t};\r\n\t\t                var info = mergeInfo('apply_examine_task', data);\r\n\t\t\t\t\t\tajaxFun(info, module.successFun4, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar Answer = (function($){\r\n\tvar curPage = 1;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tsetRefreshHeight();\r\n\t\t\tmodule.getAnswerList();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.answer-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getAnswerList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetAnswerInfo: function() {\r\n\t\t\t$('.answer-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar t_id = $(this).attr('data-a-id');\r\n\t\t\t\twindow.location.href = detailUrl + '&answer_id='+t_id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetAnswerList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'user_type': '1',\r\n\t\t\t\t'user_id': localStorage.wechat_member_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.answer-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-a-id': list[i].consult_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.answer-title').text(list[i].consult_title);\r\n\t\t\t\t\t\t_clone.find('.answer-news').text(list[i].last_reply == null ? '' : list[i].last_reply);\r\n\t\t\t\t\t\t_clone.find('.answer-date').text(list[i].new_reply_time);\r\n\t\t\t\t\t\t_clone.find('.answer-status').text(list[i].consult_status);\r\n\t\t\t\t\t\t$('.answer-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getAnswerInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.answer-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getAnswerList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar AnswerFooter = (function($){\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\twindow.location.href = url;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar AddAnswer = (function($){\r\n\tvar dialog = new auiDialog();\r\n\tvar toast = new auiToast();\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tgetAnswerType(module.consultationParamsSucc);\r\n\t\t\tmodule.explainPopup();\r\n\t\t\tmodule.submitEvt();\r\n\t\t},\r\n\r\n\t\tsubmitEvt: function() {\r\n\t\t\t$('footer.aui-bar-tab>.aui-bar-tab-item').click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar name = $('input[name=\"consultationName\"]').val(),\r\n\t\t\t\t\ttype = $('.select-consultation-type').attr('data-id'),\r\n\t\t\t\t\tcontent = $('textarea[name=\"tcontent\"]').val();\r\n\t\t\t\tif(!name) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入咨询标题\",\r\n\t\t                duration:3000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!type || type == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请选择咨询类型\",\r\n\t\t                duration:3000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!content) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入咨询内容\",\r\n\t\t                duration:3000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n \t\t\t\t\t'consult_title': name,\r\n \t\t\t\t\t'consult_content': content,\r\n \t\t\t\t\t'consult_type': type,\r\n \t\t\t\t\t'member_id': localStorage.wechat_member_id\r\n \t\t\t\t};\r\n \t\t\t\tvar info = mergeInfo('create_consult_task', data);\r\n\t\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(d) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(d);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t            $('.aui-mask-in').remove();\r\n\t            window.location.href = listUrl; \r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tconsultationParamsSucc: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.consult_type;\r\n\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\ttrigger: '.select-consultation-type', \r\n\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\twheels: [{data: list}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, \r\n\r\n\t\texplainPopup: function() {\r\n\t\t\t$('.aui-icon-question').on('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t\t        title:\"\",\r\n\t\t\t        msg:document.getElementById('dialog-inner-content').innerHTML,\r\n\t\t\t        buttons:['关闭']\r\n\t\t\t    },function(ret){\r\n\t\t\t    \tif(ret.buttonIndex == 1){\r\n\t\t\t       \t\tdialog.remove();\r\n\t\t           \t\t$('.aui-mask-in').remove();\t\r\n\t\t\t       }\r\n\t\t\t    });\r\n\t\t\t});\r\n\t\t}\t\t\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar AnswerDetail = (function($){\r\n\tvar dialog = new auiDialog();\r\n\tvar toast = new auiToast();\r\n\tvar consult_id = get_url_hash('answer_id');\r\n\tvar curPage = 1;\r\n\tvar pagesize = 5;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.getDetailInfo();\r\n\t\t},\r\n\r\n\t\tgetDetailInfo: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_info', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _t = msg.data.consult_title,\r\n\t\t\t\t\t_c = msg.data.consult_content;\r\n\t\t\t\t$('.answer-detail-title').text(_t);\r\n\t\t\t\t$('.task_content').text(_c);\r\n\t\t\t\tif(msg.data.consult_status == 3) {\r\n\t\t\t\t\t$('.answer-footer').text('已结束').addClass('over');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmodule.consultReply();\r\n\t\t\t\t\tmodule.consultEnd();\r\n\t\t\t\t}\r\n\t\t\t\tmodule.setReplyMaxHeight();\r\n\t\t\t\tmodule.getReplyList();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\t\r\n\r\n\t\tgetReplyList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_reply_list', data);\r\n\t\t\tajaxFun(info, module.listSuccessFun, beforeLoadFun($('#message-content')));\r\n\t\t},\r\n\r\n\t\tlistSuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone;\r\n\t\t\t\t\t\tif(list[i].replyer_type == 1) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-left').clone(true);\r\n\t\t\t\t\t\t}else if (list[i].replyer_type == 2) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-right').clone(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_clone.find('img').attr('src', list[i].head_img);\r\n\t\t\t\t\t\t_clone.find('.wx-name').text(list[i].nick_name);\r\n\t\t\t\t\t\t_clone.find('.wx-date').text(list[i].reply_time);\r\n\t\t\t\t\t\t_clone.find('.wx-content').text(list[i].reply_content);\r\n\t\t\t\t\t\t$('#message-content').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar e = $('<div />').addClass('empty'),\r\n\t\t\t\t\t\ts = $('<span />').text('暂无互动信息');\r\n\t\t\t\t\te.append(s);\r\n\t\t\t\t\t$('#message-content').append(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"#message-content\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getReplyList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetReplyMaxHeight: function() {\r\n\t\t\tvar _h = window.screen.height;\r\n\t\t\tvar _h1 = $('.answer-info').height;\r\n\t\t\t$('#message-content').css('max-height', _h-_h1-67+'px');\r\n\t\t},\r\n\r\n\t\tconsultReply: function() {\r\n\t\t\t$('.add-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar content = $('.answer-footer textarea').val();\r\n\t\t\t\tif(!content) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入咨询内容\",\r\n\t\t                duration:3000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'consult_id': consult_id,\r\n\t\t\t\t\t'replyer_id': localStorage.wechat_member_id,\r\n\t\t\t\t\t'replyer_type': '1',\r\n\t\t\t\t\t'reply_content': content\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('consult_reply', data);\r\n\t\t\t\tajaxFun(info, module.replySuccessFun, beforeDialogFun);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\treplySuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tconsultEnd: function() {\r\n\t\t\t$('.over-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tdialog.alert({\r\n\t\t           \ttitle:\"\",\r\n\t\t            msg:document.getElementById('dialog-inner-content').innerHTML,\r\n\t\t            buttons:['确认', '取消']\r\n\t\t        },function(ret){\r\n\t\t            if(ret.buttonIndex == 1){\r\n\t\t            \tvar data = {\r\n\t\t\t\t\t\t\t'consult_id': consult_id\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar info = mergeInfo('end_consult', data);\r\n\t\t\t\t\t\tajaxFun(info, module.endSuccessFun, beforeDialogFun);\r\n\t\t            }else{\r\n\t\t            \tdialog.remove();\r\n\t            \t\t$('.aui-mask-in').remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tendSuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar Expert = (function($){\r\n\tvar curPage = 1;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tvar _h = window.screen.height;\r\n\t\t\t$('.aui-refresh-content').css('min-height', _h+'px');\r\n\t\t\tmodule.getAnswerList();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.answer-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getAnswerList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetAnswerInfo: function() {\r\n\t\t\t$('.answer-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar t_id = $(this).attr('data-a-id');\r\n\t\t\t\twindow.location.href = detailUrl + '&answer_id='+t_id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetAnswerList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'user_type': '2',\r\n\t\t\t\t'user_id': localStorage.account_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.answer-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-a-id': list[i].consult_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.answer-title').text(list[i].consult_title);\r\n\t\t\t\t\t\t_clone.find('.answer-news').text(list[i].last_reply == null ? '' : list[i].last_reply);\r\n\t\t\t\t\t\t_clone.find('.answer-date').text(list[i].new_reply_time);\r\n\t\t\t\t\t\t_clone.find('.answer-status').text(list[i].consult_status);\r\n\t\t\t\t\t\t$('.answer-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getAnswerInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.answer-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getAnswerList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar ExpertDetail = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar consult_id = get_url_hash('answer_id');\r\n\tvar curPage = 1;\r\n\tvar pagesize = 5;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.getDetailInfo();\r\n\t\t},\r\n\r\n\t\tgetDetailInfo: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_info', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _t = msg.data.consult_title,\r\n\t\t\t\t\t_c = msg.data.consult_content;\r\n\t\t\t\t$('.answer-detail-title').text(_t);\r\n\t\t\t\t$('.task_content').text(_c);\r\n\t\t\t\tif(msg.data.consult_status == 3) {\r\n\t\t\t\t\t$('.answer-footer').text('已结束').addClass('over');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmodule.consultReply();\r\n\t\t\t\t}\r\n\t\t\t\tmodule.setReplyMaxHeight();\r\n\t\t\t\tmodule.getReplyList();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\t\r\n\r\n\t\tgetReplyList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_reply_list', data);\r\n\t\t\tajaxFun(info, module.listSuccessFun, beforeLoadFun($('#message-content')));\r\n\t\t},\r\n\r\n\t\tlistSuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone;\r\n\t\t\t\t\t\tif(list[i].replyer_type == 1) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-left').clone(true);\r\n\t\t\t\t\t\t}else if (list[i].replyer_type == 2) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-right').clone(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_clone.find('img').attr('src', list[i].head_img);\r\n\t\t\t\t\t\t_clone.find('.wx-name').text(list[i].nick_name);\r\n\t\t\t\t\t\t_clone.find('.wx-date').text(list[i].reply_time);\r\n\t\t\t\t\t\t_clone.find('.wx-content').text(list[i].reply_content);\r\n\t\t\t\t\t\t$('#message-content').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar e = $('<div />').addClass('empty'),\r\n\t\t\t\t\t\ts = $('<span />').text('暂无互动信息');\r\n\t\t\t\t\te.append(s);\r\n\t\t\t\t\t$('#message-content').append(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"#message-content\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getReplyList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetReplyMaxHeight: function() {\r\n\t\t\tvar _h = window.screen.height;\r\n\t\t\tvar _h1 = $('.answer-info').height;\r\n\t\t\t$('#message-content').css('max-height', _h-_h1-67+'px');\r\n\t\t},\r\n\r\n\t\tconsultReply: function() {\r\n\t\t\t$('.add-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar content = $('.answer-footer textarea').val();\r\n\t\t\t\tif(!content) {\r\n\t\t\t\t\ttoast.fail({\r\n\t\t                title:\"请输入回复内容\",\r\n\t\t                duration:3000\r\n\t\t            });\r\n\t\t            return false;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'consult_id': consult_id,\r\n\t\t\t\t\t'replyer_id': localStorage.account_id,\r\n\t\t\t\t\t'replyer_type': '2',\r\n\t\t\t\t\t'reply_content': content\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('consult_reply', data);\r\n\t\t\t\tajaxFun(info, module.replySuccessFun, beforeDialogFun);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\treplySuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar AdminExpert = (function($){\r\n\tvar curPage = 1;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tsetRefreshHeight();\r\n\t\t\tmodule.getAnswerList();\r\n\t\t\tmodule.pullRefresh();\r\n\t\t},\r\n\r\n\t\tpullRefresh: function() {\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t\t\t        container: document.querySelector('.aui-refresh-content'),\r\n\t\t\t        triggerDistance: 100\r\n\t\t\t},function(ret){\r\n\t\t\t\t if(ret.status==\"success\"){\r\n\t\t\t\t \tsetTimeout(function(){\r\n\t                \tcurPage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.answer-content .aui-list').children().remove();\r\n\t\t       \t\t\tmodule.getAnswerList();\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t\t\t\t }\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetAnswerInfo: function() {\r\n\t\t\t$('.answer-content .aui-list>li').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar t_id = $(this).attr('data-a-id');\r\n\t\t\t\twindow.location.href = detailUrl + '&answer_id='+t_id;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetAnswerList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'user_type': '3',\r\n\t\t\t\t'user_id': localStorage.user_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_list', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeLoadFun($('.answer-content .aui-list')));\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t_clone.find('li').attr({\r\n\t\t\t\t\t\t\t'data-a-id': list[i].consult_id\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_clone.find('.answer-title').text(list[i].consult_title);\r\n\t\t\t\t\t\t_clone.find('.answer-news').text(list[i].last_reply == null ? '' : list[i].last_reply);\r\n\t\t\t\t\t\t_clone.find('.answer-date').text(list[i].new_reply_time);\r\n\t\t\t\t\t\t_clone.find('.answer-status').text(list[i].consult_status);\r\n\t\t\t\t\t\t$('.answer-content .aui-list').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t\tmodule.getAnswerInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _e = createEmptyDom();\r\n\t\t\t\t\t$('.answer-content .aui-list').append(_e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"body\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getAnswerList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n\r\nvar AdminExpertDetail = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar consult_id = get_url_hash('answer_id');\r\n\tvar curPage = 1;\r\n\tvar pagesize = 5;\r\n\tvar scrollState = false;\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tmodule.getDetailInfo();\r\n\t\t},\r\n\r\n\t\tgetExpertType: function(expert_type) {\r\n\t\t\tvar data = {\r\n\t\t\t\t'expert_type': expert_type\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_expert_account', data);\r\n\t\t\tajaxFun(info, module.expertParamsSucc, '');\r\n\t\t},\r\n\r\n\t\texpertParamsSucc: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\t\ttrigger: '.select-expert-type', \r\n\t\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\t\twheels: [{data: list}]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, \r\n\r\n\t\tgetDetailInfo: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_consult_info', data);\r\n\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar _t = msg.data.consult_title,\r\n\t\t\t\t\t_c = msg.data.consult_content;\r\n\t\t\t\t$('.answer-detail-title').text(_t);\r\n\t\t\t\t$('.task_content').text(_c);\r\n\t\t\t\tif(msg.data.consult_status != 1) {\r\n\t\t\t\t\t$('.expert-type-inner').removeClass('aui-list-item-arrow');\r\n\t\t\t\t\t$('.select-expert-type').text(msg.data.consult_expert_name);\r\n\t\t\t\t\t$('.fp-btn').text('');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgetAnswerType(module.eParamsSucc);\r\n\t\t\t\t\tmodule.consultReply();\r\n\t\t\t\t}\r\n\t\t\t\tmodule.setReplyMaxHeight();\r\n\t\t\t\tmodule.getReplyList();\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\teParamsSucc: function(data) {\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.expert_type;\r\n\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\ttrigger: '.select-expert-list', \r\n\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\twheels: [{data: list}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tmodule.ensureEvt();\r\n\t\t},\t\r\n\r\n\t\tensureEvt: function() {\r\n\t\t\t$('.wheels.select-expert-list').parents('.mobileSelect').find('.ensure ').click(function(){\r\n\t\t\t\tvar expert_id = $('.select-expert-list').attr('data-id');\r\n\t\t\t\tmodule.getExpertType(expert_id);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetReplyList: function() {\r\n\t\t\tvar data = {\r\n\t\t\t\t'consult_id': consult_id,\r\n\t\t\t\t'page': curPage,\r\n\t\t\t\t'page_size': pagesize\r\n\t\t\t};\r\n\t\t\tvar info = mergeInfo('get_reply_list', data);\r\n\t\t\tajaxFun(info, module.listSuccessFun, beforeLoadFun($('#message-content')));\r\n\t\t},\r\n\r\n\t\tlistSuccessFun: function(data) {\r\n\t\t\t$('.loading-more').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar list = msg.data.list,\r\n\t\t\t\t\tcount = msg.data.count;\r\n\t\t\t\tif(list.length) {\r\n\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\tvar _clone;\r\n\t\t\t\t\t\tif(list[i].replyer_type == 1) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-left').clone(true);\r\n\t\t\t\t\t\t}else if (list[i].replyer_type == 2) {\r\n\t\t\t\t\t\t\t_clone = $('.copy-item-right').clone(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_clone.find('img').attr('src', list[i].head_img);\r\n\t\t\t\t\t\t_clone.find('.wx-name').text(list[i].nick_name);\r\n\t\t\t\t\t\t_clone.find('.wx-date').text(list[i].reply_time);\r\n\t\t\t\t\t\t_clone.find('.wx-content').text(list[i].reply_content);\r\n\t\t\t\t\t\t$('#message-content').append(_clone.html());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\tmodule.scrollAddMore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar e = $('<div />').addClass('empty'),\r\n\t\t\t\t\t\ts = $('<span />').text('暂无互动信息');\r\n\t\t\t\t\te.append(s);\r\n\t\t\t\t\t$('#message-content').append(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollAddMore: function() {\r\n\t\t\tvar scroll = new auiScroll({\r\n\t\t\t    listen:true,\r\n\t\t\t    distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t\t},function(ret){\r\n\t\t\t\tif(ret.isToBottom && scrollState && $(\"#message-content\").scrollTop() > 0) {\r\n\t\t\t\t\t// addFun ajax加载更多方法\r\n\t\t\t\t\tscrollState = false;\r\n\t\t\t\t\tcurPage++;\r\n\t\t\t\t\tmodule.getReplyList();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetReplyMaxHeight: function() {\r\n\t\t\tvar _h = window.screen.height;\r\n\t\t\tvar _h1 = $('.answer-info').height;\r\n\t\t\t$('#message-content').css('max-height', _h-_h1-50+'px');\r\n\t\t},\r\n\r\n\t\tconsultReply: function() {\r\n\t\t\t$('.fp-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tif($('.select-expert-list').attr('data-id') == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请选择专家类型\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tif($('.select-expert-type').attr('data-id') == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请选择分配专家\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'consult_id': $('.select-expert-list').attr('data-id'),\r\n\t\t\t\t\t'expert_id': $('.select-expert-type').attr('data-id')\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('allocation_expert', data);\r\n\t\t\t\tajaxFun(info, module.replySuccessFun, beforeDialogFun);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\treplySuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\talert('分配成功');\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}, 2000);\t\r\n\t\t\t} else {\r\n\t\t\t\talert(msg.errmsg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n\r\n// 职员登录注册\r\nvar Employeelogin = (function($){\r\n\tvar toast = new auiToast();\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\twindow.localStorage.setItem('localStorage_url', $('.localStorage-url').val());\r\n\t\t\tmodule.checkUserInfo();\r\n\t\t\tmodule.getVerCode();\r\n\t\t}, \r\n\r\n\t\tcheckUserInfo: function() {\r\n\t\t\t$('.next-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar mob = $('.mob').val();\r\n\t\t\t\tvar code = $('.verify').val();\r\n\t\t\t\tvar re =/^1[3|7|5|8]\\d{9}$/;\r\n\t\t\t\tif(!re.test(mob)) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请输入手机号\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                $('.mob').focus();\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(code == '') {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请输入验证码\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                $('.verify').focus();\r\n\t                return false;\r\n\t\t\t\t} else if (code.length < 6) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"验证码格式不正确\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                $('.verify').focus();\r\n\t                return false;\r\n\t            } \r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'wechat_openid': $('.openid').val(),\r\n\t\t\t\t\t'mobile': mob, \r\n\t\t\t\t\t'type': type,\r\n\t\t\t\t\t'sns_code': code\r\n\t\t\t\t};\r\n\t\t\t\tvar info = mergeInfo('bind_account', data);\r\n\t\t\t\tajaxFun(info, module.successFun, beforeDialogFun);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsuccessFun: function(data) {\r\n\t\t\t$('.zhezhao').remove();\r\n\t\t\tvar msg = decodeMsg(data);\r\n\t\t\tvar str = '';\r\n\t\t\tif(msg.errcode == 1) {\r\n\t\t\t\tvar account_id = msg.data.account_id;\r\n\t\t\t\tvar wechat_member_id = msg.data.wechat_member_id;\r\n\t\t\t\tif(account_id != undefined) {\r\n\t\t\t\t\twindow.localStorage.setItem('account_id', account_id);\r\n\t\t\t\t}\r\n\t\t\t\tif(wechat_member_id != undefined) {\r\n\t\t\t\t\twindow.localStorage.setItem('wechat_member_id', wechat_member_id);\r\n\t\t\t\t}\r\n\t\t\t\twindow.localStorage.setItem('account_name', msg.data.account_name);\r\n\t\t\t\twindow.localStorage.setItem('account_type', msg.data.account_type);\r\n\t\t\t\t// window.localStorage.setItem('account_logo', msg.data.account_logo);\r\n\t\t\t\tstr = '&status=success';\r\n\t\t\t} else {\r\n\t\t\t\tstr = '&status=fail';\r\n\t\t\t}\r\n\t\t\twindow.location.href = nextUrl+str+'&type='+ type;\r\n\t\t},\r\n\r\n\t\tgetVerCode: function() {\r\n\t\t\t$('.get-verify-btn').bind('click', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar _this = $(this);\r\n\t\t\t\tvar mob = $('.mob').val();\r\n\t\t\t\tvar re =/^1[3|7|5|8]\\d{9}$/;\r\n\t\t\t\tif(re.test(mob)) {\r\n\t\t\t\t\tvar data = {'mobile': mob},\r\n\t\t\t\t\t\tinfo = mergeInfo('send_seccode', data);\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\tdata: info,\r\n\t\t\t\t\t\tdataType: 'html',\r\n\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t \tbeforeSend: function() {\r\n\t\t\t\t\t \t\t_this.attr('disabled', true);\r\n\t\t\t\t\t \t},\r\n\t\t\t\t    \tsuccess: function(data) {\r\n\t\t\t\t    \t\tvar msg = decodeMsg(data);\r\n\t\t\t\t    \t\tif(msg.errcode == 1) {\r\n\t\t\t\t    \t\t\t_this.css('background-color', '#ccc');\r\n\t\t\t\t    \t\t\tvar d = new Date();\r\n\t\t\t\t\t\t\t\t\td.setSeconds(d.getSeconds() + 59);\r\n\t\t\t\t\t\t\t\t\tvar m = d.getMonth() + 1;\r\n\t\t\t\t\t\t\t\t\tvar time = d.getFullYear() + '-' + m + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();\r\n\t\t\t\t\t\t\t\t\tvar end_time = new Date(Date.parse(time.replace(/-/g, \"/\"))).getTime(),\r\n\t\t\t\t\t\t\t\t\t//月份是实际月份-1\r\n\t\t\t\t\t\t\t\t\tsys_second = (end_time - new Date().getTime()) / 1000;\r\n\t\t\t\t\t\t\t\t\tvar timer = setInterval(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (sys_second > 1) {\r\n\t\t\t\t\t\t\t\t\t\t\tsys_second -= 1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar day = Math.floor((sys_second / 3600) / 24);\r\n\t\t\t\t\t\t\t\t\t\t\tvar hour = Math.floor((sys_second / 3600) % 24);\r\n\t\t\t\t\t\t\t\t\t\t\tvar minute = Math.floor((sys_second / 60) % 60);\r\n\t\t\t\t\t\t\t\t\t\t\tvar second = Math.floor(sys_second % 60);\r\n\t\t\t\t\t\t\t\t\t\t\tvar time_text = '';\r\n\t\t\t\t\t\t\t\t\t\t\tif (day > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\ttime_text += day + '天';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif (hour > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (hour < 10) {\r\n\t\t\t\t\t\t\t\t\t\t\thour = '0' + hour;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttime_text += hour + '小时';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif (minute > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (minute < 10) {\r\n\t\t\t\t\t\t\t\t\t\t\tminute = '0' + minute;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttime_text += minute + '分';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif (second > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (second < 10) {\r\n\t\t\t\t\t\t\t\t\t\t\tsecond = '0' + second;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttime_text += second + '秒';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t_this.text(time_text);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\t\t\t\t_this.attr(\"disabled\", false);\r\n\t\t\t\t\t\t\t\t\t\t\t_this.text('重新获取验证码');\r\n\t\t\t\t\t\t\t\t\t\t\t_this.css('background-color','#00bcd4');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t1000);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttoast.fail({\r\n\t\t\t\t                    \ttitle:\"获取验证码失败\",\r\n\t\t\t\t                    \tduration:2000\r\n\t\t\t\t                \t});\r\n\t\t\t\t                \t_this.attr(\"disabled\", false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t    \t},\r\n\t\t\t\t    \terror: function (data) {\r\n\t\t\t\t    \t\tconsole.log('error:' + data);\r\n\t\t\t\t    \t\t_this.attr(\"disabled\", false);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    })\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请输入正确的手机号\",\r\n\t                    duration:3000\r\n\t                });\r\n\t                $('.mob').focus();\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\nvar VerifyEmployee = (function($){\r\n\tvar module = {\r\n\t\tinit: function(){\r\n\t\t\tvar status = get_url_hash('status');\r\n\t\t\tvar type = get_url_hash('type');\r\n\t\t\tif(type == 'fans') {\r\n\t\t\t\t$('.outer-content').removeClass('aui-hide');\r\n\t\t\t\tif(status == 'success') {\r\n\t\t\t\t\t// $('.outer-content').find('.user-logo>img').attr('src', localStorage.account_logo);\r\n\t\t\t\t\t$('.outer-content').find('.verify-success').show();\r\n\t\t\t\t\t$('.outer-content .go-btn').bind('click', function(e){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\twindow.location.href = outTaskUrl;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(status == 'fail') {\r\n\t\t\t\t\t$('.outer-content').find('.verify-error').show();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$('.inner-content').removeClass('aui-hide');\r\n\t\t\t\tif(status == 'success') {\r\n\t\t\t\t\tvar url;\r\n\t\t\t\t\t$('.inner-content .user-name').text(localStorage.account_name);\r\n\t\t\t\t\t$('.inner-content .stage-lebel').text(localStorage.account_type);\r\n\t\t\t\t\t$('.inner-content .verify-success').show();\r\n\t\t\t\t\ttype == 'account' ? url = taskUrl : url = expertUrl;\r\n\t\t\t\t\t$('.inner-content .go-btn').bind('click', function(e){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\twindow.location.href = url;\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(status == 'fail') {\r\n\t\t\t\t\t$('.inner-content .verify-error').show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery))\r\n\r\n\r\n\r\n"]}