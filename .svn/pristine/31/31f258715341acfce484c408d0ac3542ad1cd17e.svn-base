{"version":3,"sources":["mobileSelect.js"],"names":["window","MobileSelect","getClass","dom","string","getElementsByClassName","config","this","mobileSelect","wheelsData","wheels","jsonType","jsonData","checkDataType","renderWheels","displayJson","cascade","startY","moveEndY","moveY","oldMoveY","offset","offsetSum","oversizeBorder","curDistance","clickStatus","init","prototype","constructor","_this","trigger","document","querySelector","wheel","slider","liHeight","offsetHeight","ensureBtn","closeBtn","grayLayer","popUp","callback","transitionEnd","initPosition","position","titleText","title","className","style","cursor","setTitle","checkCascade","initCascade","length","i","push","setCurDistance","addListenerAll","addEventListener","classList","remove","$","hasClass","popup","hide","getElementById","data_id","tempValue","getValue","getDataId","type","attr","data-id","data-type","innerHTML","id","setAttribute","text","removeAttr","removeClass","_wheels","_list","JSON","parse","localStorage","take_meal_list","_tempHTML","find","append","addClass","val","data_price","getDataPrice","totalAmount","yhAmount","addAmount","accAdd","accAmount","accSub","getIndexArr","getJson","add","event","stopPropagation","fixRowStyle","_class","createElement","body","appendChild","tempHTML","j","data","undefined","d_price","d_id","d_name","expert_id","expert_name","addListenerWheel","addListenerLi","theWheel","index","touch","firstChild","dragClick","sliderIndex","curWheelLi","getElementsByTagName","singleClick","node","childs","generateArrData","checkArrDeep","updateWheels","targetArr","tempArr","value","parent","checkRange","posIndexArr","deleteNum","pop","resultNode","resetPostion","tempCount","tempPosArr","count","removeChild","tempWheel","updateWheel","width","toFixed","getIndex","distance","Math","round","temp","positionArr","calcDistance","indexArr","movePosition","fixPosition","theSlider","webkitTransform","transform","locatePostion","posIndex","updateCurDistance","parseInt","split","getDistance","getAttribute","touches","clientY","changedTouches","setTimeout","preventDefault","theLi","parentNode"],"mappings":"AAMAA,OAAOC,aAAe,WAErB,QAASC,GAASC,EAAIC,GACrB,MAAOD,GAAIE,uBAAuBD,GAInC,QAASH,GAAaK,GACrBC,KAAKC,aACLD,KAAKE,WAAaH,EAAOI,OACzBH,KAAKI,UAAY,EACjBJ,KAAKK,YACLL,KAAKM,gBACLN,KAAKO,aAAaP,KAAKE,YACvBF,KAAKQ,eACLR,KAAKS,SAAU,EACfT,KAAKU,OACLV,KAAKW,SACLX,KAAKY,MACLZ,KAAKa,SACLb,KAAKc,OAAS,EACdd,KAAKe,UAAY,EACjBf,KAAKgB,eACLhB,KAAKiB,eACLjB,KAAKkB,aAAc,EAEnBlB,KAAKmB,KAAKpB,GAslBX,MAnlBAL,GAAa0B,WACZC,YAAa3B,EACbyB,KAAM,SAASpB,GACd,GAAIuB,GAAQtB,IAyBZ,IAxBAsB,EAAMC,QAAUC,SAASC,cAAc1B,EAAOwB,SAC9CD,EAAMI,MAAQ/B,EAAS2B,EAAMrB,aAAa,SAC1CqB,EAAMK,OAAShC,EAAS2B,EAAMrB,aAAa,mBAC3CqB,EAAMnB,OAASmB,EAAMrB,aAAawB,cAAc,WAChDH,EAAMM,SAAWN,EAAMrB,aAAawB,cAAc,MAAMI,aACxDP,EAAMQ,UAAYR,EAAMrB,aAAawB,cAAc,WACnDH,EAAMS,SAAWT,EAAMrB,aAAawB,cAAc,WAClDH,EAAMU,UAAYV,EAAMrB,aAAawB,cAAc,cACnDH,EAAMW,MAAQX,EAAMrB,aAAawB,cAAc,YAC/CH,EAAMY,SAAWnC,EAAOmC,SAAWnC,EAAOmC,SAAW,aACrDZ,EAAMa,cAAgBpC,EAAOoC,cAAgBpC,EAAOoC,cAAgB,aACpEb,EAAMc,aAAerC,EAAOsC,SAAWtC,EAAOsC,YAC9Cf,EAAMgB,UAAYvC,EAAOwC,MAAQxC,EAAOwC,MAAQ,GAEhDjB,EAAMnB,OAAOqC,WAAa,IAAMlB,EAAMC,QAAQiB,UAC9ClB,EAAMC,QAAQkB,MAAMC,OAAO,UAC3BpB,EAAMqB,SAASrB,EAAMgB,WACrBhB,EAAMsB,eAEFtB,EAAMb,SACTa,EAAMuB,cAIyB,GAA7BvB,EAAMc,aAAaU,OACrB,IAAI,GAAIC,GAAE,EAAGA,EAAEzB,EAAMK,OAAOmB,OAAQC,IACnCzB,EAAMc,aAAaY,KAAK,EAI1B1B,GAAM2B,eAAe3B,EAAMc,cAC3Bd,EAAM4B,iBAGN5B,EAAMS,SAASoB,iBAAiB,QAAQ,WACxC7B,EAAMrB,aAAamD,UAAUC,OAAO,uBAGjC/B,EAAMQ,UAAUqB,iBAAiB,QAAQ,WAE5C,GADA7B,EAAMrB,aAAamD,UAAUC,OAAO,qBACjCC,EAAEhC,EAAMC,SAASgC,SAAS,gBAAkBD,EAAEhC,EAAMC,SAASgC,SAAS,gBAAiB,CACzFC,MAAMC,KAAKjC,SAASkC,eAAe,eAEhC,KAAI,GADHC,GAAQ,GACDZ,EAAE,EAAGA,EAAEzB,EAAMI,MAAMoB,OAAQC,IACRa,GAA1Bb,GAAGzB,EAAMI,MAAMoB,OAAO,EAAiBxB,EAAMuC,SAASd,GAAkBzB,EAAMuC,SAASd,GAAG,IAChEY,GAA1BZ,GAAGzB,EAAMI,MAAMoB,OAAO,EAAexB,EAAMwC,UAAUf,GAAgBzB,EAAMwC,UAAUf,GAAG,GAEzF,IAAIgB,GAAOT,EAAEhC,EAAMC,SAASgC,SAAS,eAAiB,IAAI,GAC1DD,GAAEtD,MAAMgE,MAAMC,UAAWN,EAASO,YAAaH,QAC9C,CAGD,IAAI,GAFHH,GAAW,GACXD,EAAQ,GACDZ,EAAE,EAAGA,EAAEzB,EAAMI,MAAMoB,OAAQC,IACRa,GAA1Bb,GAAGzB,EAAMI,MAAMoB,OAAO,EAAiBxB,EAAMuC,SAASd,GAAkBzB,EAAMuC,SAASd,GAAG,IAChEY,GAA1BZ,GAAGzB,EAAMI,MAAMoB,OAAO,EAAexB,EAAMwC,UAAUf,GAAgBzB,EAAMwC,UAAUf,GAAG,GAEzFzB,GAAMC,QAAQ4C,UAAYP,CAC1B,IAAIQ,GAAKd,EAAEhC,EAAMC,SAASyC,KAAK,UAE/B,IADA1C,EAAMC,QAAQ8C,aAAa,UAAWV,GACnCL,EAAEhC,EAAMC,SAASgC,SAAS,sBAC5B,GAAGa,GAAMT,EAAS,CACjBL,EAAE,0BAA0BgB,KAAK,OAAOC,WAAW,WACnDjB,EAAE,qBAAqBkB,YAAY,WACnC,IAAIC,GAAUnB,EAAE,6BACZoB,EAAQC,KAAKC,MAAMC,aAAaC,gBAAgBnB,GAChDoB,EAAY,EAChBN,GAAQO,KAAK,SAAS3B,QACtB,KAAI,GAAIN,KAAK2B,GACfK,GAAa,gBAAgBhC,EAAE,KAAK2B,EAAM3B,GAAG,OAE9C0B,GAAQO,KAAK,MAAMC,OAAOF,QAElB,IAAGzB,EAAEhC,EAAMC,SAASgC,SAAS,qBACrB,MAAXI,EACFL,EAAE,qBAAqBkB,YAAY,aAEnClB,EAAE,qBAAqB4B,SAAS,YAChC5B,EAAE,wBAAwB6B,IAAI,SAG1B,IAAI7B,EAAEhC,EAAMC,SAASgC,SAAS,eAAgB,CAEnD,IAAI,GADA6B,GAAa,GACTrC,EAAE,EAAGA,EAAEzB,EAAMI,MAAMoB,OAAQC,IACRqC,GAA1BrC,GAAGzB,EAAMI,MAAMoB,OAAO,EAAkBxB,EAAM+D,aAAatC,GAAmBzB,EAAM+D,aAAatC,GAAG,GAErG,IAAIuC,GAAchC,EAAE,cAAcgB,OAC9BiB,EAAWjC,EAAE,aAAagB,OAC1BkB,EAAYC,OAAOH,EAAaC,GAChCG,EAAYC,OAAOH,EAAWJ,EAClC9B,GAAE,cAAcgB,KAAKoB,GACrBpC,EAAE,aAAagB,KAAKc,GACpB9D,EAAMC,QAAQ8C,aAAa,aAAce,GAE1C9D,EAAMY,SAASZ,EAAMsE,cAActE,EAAMuE,cAI1CvE,EAAMC,QAAQ4B,iBAAiB,QAAQ,WACtC7B,EAAMrB,aAAamD,UAAU0C,IAAI,uBAElCxE,EAAMU,UAAUmB,iBAAiB,QAAQ,WACxC7B,EAAMrB,aAAamD,UAAUC,OAAO,uBAErC/B,EAAMW,MAAMkB,iBAAiB,QAAQ,WACpC4C,MAAMC,oBAGV1E,EAAM2E,eAGPtD,SAAU,SAAS9C,GAClB,GAAIyB,GAAQtB,IACZsB,GAAMgB,UAAYzC,EAClByB,EAAMrB,aAAawB,cAAc,UAAU0C,UAAY7C,EAAMgB,WAG9D/B,aAAc,SAASL,GACtB,GAAIoB,GAAQtB,KACRkG,EAAS,EACV5C,GAAEhC,EAAMC,SAASgC,SAAS,wBAC5B2C,EAAS,iBAEV5E,EAAMrB,aAAeuB,SAAS2E,cAAc,OAC5C7E,EAAMrB,aAAauC,UAAY,eAC/BlB,EAAMrB,aAAakE,UACf,uKAMqC+B,EAAO,0KAY7C1E,SAAS4E,KAAKC,YAAY/E,EAAMrB,aAGnC,IAAIqG,GAAS,EACb,KAAI,GAAIvD,KAAK7C,GAAW,CAEvB,GADAoG,GAAY,kDACThF,EAAMlB,SACR,IAAI,GAAImG,KAAKrG,GAAW6C,GAAGyD,KAGxBF,GAFkCG,QAAjCvG,EAAW6C,GAAGyD,KAAKD,GAAGG,QACS,MAA9BxG,EAAW6C,GAAGyD,KAAKD,GAAGI,KACZ,gBAAgBzG,EAAW6C,GAAGyD,KAAKD,GAAGI,KAAK,iBAAiBzG,EAAW6C,GAAGyD,KAAKD,GAAGG,QAAQ,KAAKxG,EAAW6C,GAAGyD,KAAKD,GAAGK,OAAO,QAE5H,gBAAgB1G,EAAW6C,GAAGyD,KAAKD,GAAGI,KAAK,iBAAiBzG,EAAW6C,GAAGyD,KAAKD,GAAGG,QAAQ,KAAKxG,EAAW6C,GAAGyD,KAAKD,GAAGK,OAAO,OAAO1G,EAAW6C,GAAGyD,KAAKD,GAAGG,QAAQ,QAIlK,gBAAgBxG,EAAW6C,GAAGyD,KAAKD,GAAGM,UAAU,KAAK3G,EAAW6C,GAAGyD,KAAKD,GAAGO,YAAY,YAKrG,KAAI,GAAIP,KAAKrG,GAAW6C,GAAGyD,KAC1BF,GAAY,gBAAgBC,EAAE,KAAKrG,EAAW6C,GAAGyD,KAAKD,GAAG,OAG3DD,IAAY,cAEbhF,EAAMrB,aAAawB,cAAc,WAAW0C,UAAYmC,GAGzDpD,eAAgB,WAEf,IAAI,GADA5B,GAAQtB,KACJ+C,EAAE,EAAGA,EAAEzB,EAAMK,OAAOmB,OAAQC,KAEnC,SAAWA,GACVzB,EAAMyF,iBAAiBzF,EAAMI,MAAMqB,GAAIA,GACvCzB,EAAM0F,cAAcjE,IAClBA,IAILgE,iBAAkB,SAASE,EAAUC,GACpC,GAAI5F,GAAQtB,IACZiH,GAAS9D,iBAAiB,aAAc,WACvC7B,EAAM6F,MAAMpB,MAAO/F,KAAKoH,WAAYF,KACnC,GACFD,EAAS9D,iBAAiB,WAAY,WACrC7B,EAAM6F,MAAMpB,MAAO/F,KAAKoH,WAAYF,KACnC,GACFD,EAAS9D,iBAAiB,YAAa,WACtC7B,EAAM6F,MAAMpB,MAAO/F,KAAKoH,WAAYF,KACnC,GAGFD,EAAS9D,iBAAiB,YAAa,WACtC7B,EAAM+F,UAAUtB,MAAO/F,KAAKoH,WAAYF,KACvC,GACFD,EAAS9D,iBAAiB,YAAa,WACtC7B,EAAM+F,UAAUtB,MAAO/F,KAAKoH,WAAYF,KACvC,GACFD,EAAS9D,iBAAiB,UAAW,WACpC7B,EAAM+F,UAAUtB,MAAO/F,KAAKoH,WAAYF,KACvC,IAGHF,cAAc,SAASM,GAGtB,IAAI,GAFAhG,GAAQtB,KACRuH,EAAajG,EAAMK,OAAO2F,GAAaE,qBAAqB,MACxDjB,EAAE,EAAGA,EAAEgB,EAAWzE,OAAOyD,KAChC,SAAWA,GACVgB,EAAWhB,GAAGpD,iBAAiB,QAAQ,WACtC7B,EAAMmG,YAAYzH,KAAMuG,EAAGe,KAC1B,IACAf,IAILjG,cAAe,WACd,GAAIgB,GAAQtB,IAC4B,iBAA9BsB,GAAMpB,WAAW,GAAGsG,KAAK,KAClClF,EAAMlB,UAAW,EACjBkB,EAAMjB,SAAWiB,EAAMpB,WAAW,GAAGsG,OAIvC5D,aAAc,WACb,GAAItB,GAAQtB,IACZ,IAAGsB,EAAMlB,UAER,IAAI,GADAsH,GAAOpG,EAAMpB,WAAW,GAAGsG,KACvBzD,EAAE,EAAGA,EAAE2E,EAAK5E,OAAQC,IAC3B,GAAG,UAAY2E,GAAK3E,IAAM2E,EAAK3E,GAAG4E,OAAO7E,OAAS,EAAE,CACnDxB,EAAMb,SAAU,CAChB,YAIFa,GAAMb,SAAU,GAIlBoC,YAAa,WACZ,GAAIvB,GAAQtB,IACZsB,GAAMd,YAAYwC,KAAK1B,EAAMsG,gBAAgBtG,EAAMjB,WACnDiB,EAAMuG,aAAavG,EAAMjB,SAAS,IAGlCiB,EAAMwG,gBAGPF,gBAAiB,SAAUG,GAE1B,IAAI,GADAC,MACIjF,EAAE,EAAGA,EAAEgF,EAAUjF,OAAQC,IAChCiF,EAAQhF,MACPoB,GAAM2D,EAAUhF,GAAGqB,GACnB6D,MAASF,EAAUhF,GAAGkF,OAGxB,OAAOD,IAGRH,aAAc,SAAUK,GACvB,GAAI5G,GAAQtB,IACR,WAAYkI,IAAUA,EAAOP,OAAO7E,OAAS,IAChDxB,EAAMd,YAAYwC,KAAK1B,EAAMsG,gBAAgBM,EAAOP,SACpDrG,EAAMuG,aAAaK,EAAOP,OAAO,MAInCQ,WAAY,SAASjB,EAAOkB,GAG3B,IAAI,GAFA9G,GAAQtB,KACRqI,EAAY/G,EAAMd,YAAYsC,OAAO,EAAEoE,EACnCnE,EAAE,EAAGA,EAAEsF,EAAWtF,IACzBzB,EAAMd,YAAY8H,KAGnB,KAAK,GADDC,GACKxF,EAAI,EAAGA,GAAKmE,EAAOnE,IAE1BwF,EADQ,GAALxF,EACUzB,EAAMjB,SAAS+H,EAAY,IAE3BG,EAAWZ,OAAOS,EAAYrF,GAG7CzB,GAAMuG,aAAaU,GAEnBjH,EAAMwG,eACNxG,EAAM2E,cACN3E,EAAM2B,eAAe3B,EAAMkH,aAAatB,EAAOkB,KAGhDI,aAAc,SAAStB,EAAOkB,GAC7B,GAEIK,GAFAnH,EAAQtB,KACR0I,EAAaN,CAEjB,IAAG9G,EAAMK,OAAOmB,OAASsF,EAAYtF,OAAO,CAC3C2F,EAAYnH,EAAMK,OAAOmB,OAASsF,EAAYtF,MAC9C,KAAI,GAAIC,GAAE,EAAGA,EAAE0F,EAAW1F,IACzB2F,EAAW1F,KAAK,OAEZ,IAAG1B,EAAMK,OAAOmB,OAASsF,EAAYtF,OAAO,CACjD2F,EAAYL,EAAYtF,OAASxB,EAAMK,OAAOmB,MAC9C,KAAI,GAAIC,GAAE,EAAGA,EAAE0F,EAAW1F,IACzB2F,EAAWJ,MAGb,IAAI,GAAIvF,GAAEmE,EAAM,EAAGnE,EAAG2F,EAAW5F,OAAQC,IACxC2F,EAAW3F,GAAK,CAEjB,OAAO2F,IAGRZ,aAAc,WACb,GAAIxG,GAAQtB,IAEZ,IAAGsB,EAAMI,MAAMoB,OAASxB,EAAMd,YAAYsC,OAEzC,IAAI,GADA6F,GAAQrH,EAAMI,MAAMoB,OAASxB,EAAMd,YAAYsC,OAC3CC,EAAE,EAAGA,EAAE4F,EAAO5F,IACrBzB,EAAMnB,OAAOyI,YAAYtH,EAAMI,MAAMJ,EAAMI,MAAMoB,OAAO,GAI1D,KAAI,GAAIC,GAAE,EAAGA,EAAEzB,EAAMd,YAAYsC,OAAQC,KACxC,SAAWA,GACV,GAAIuD,GAAS,EACb,IAAGhF,EAAMI,MAAMqB,GAAG,CAEjB,IAAI,GAAIwD,GAAE,EAAGA,EAAEjF,EAAMd,YAAYuC,GAAGD,OAAQyD,IAC3CD,GAAY,gBAAgBhF,EAAMd,YAAYuC,GAAGwD,GAAGnC,GAAG,KAAK9C,EAAMd,YAAYuC,GAAGwD,GAAG0B,MAAM,OAE3F3G,GAAMK,OAAOoB,GAAGoB,UAAYmC,MAExB,CACJ,GAAIuC,GAAYrH,SAAS2E,cAAc,MACvC0C,GAAUrG,UAAY,QACtB8D,EAAW,8BACX,KAAI,GAAIC,GAAE,EAAGA,EAAEjF,EAAMd,YAAYuC,GAAGD,OAAQyD,IAC3CD,GAAY,gBAAgBhF,EAAMd,YAAYuC,GAAGwD,GAAGnC,GAAG,KAAK9C,EAAMd,YAAYuC,GAAGwD,GAAG0B,MAAM,OAE3F3B,IAAY,QACZuC,EAAU1E,UAAYmC,EAEtBhF,EAAMyF,iBAAiB8B,EAAW9F,GAC/BzB,EAAMnB,OAAOkG,YAAYwC,GAE7BvH,EAAM0F,cAAcjE,IAClBA,IAIL+F,YAAa,SAASxB,EAAad,GAGlC,IAAI,GAFAlF,GAAQtB,KACRsG,EAAS,GACLC,EAAE,EAAGA,EAAEC,EAAK1D,OAAQyD,IAC3BD,GAAY,OAAOE,EAAKD,GAAG,OAE5BjF,GAAMK,OAAO2F,GAAanD,UAAYmC,EACtChF,EAAM0F,cAAcM,IAGrBrB,YAAa,WAGZ,IAAI,GAFA3E,GAAQtB,KACR+I,GAAS,IAAIzH,EAAMI,MAAMoB,QAAQkG,QAAQ,GACrCjG,EAAE,EAAGA,EAAEzB,EAAMI,MAAMoB,OAAQC,IAClCzB,EAAMI,MAAMqB,GAAGN,MAAMsG,MAAQA,EAAM,KAIlCE,SAAU,SAASC,GACf,MAAOC,MAAKC,OAAO,EAAEpJ,KAAK4B,SAASsH,GAAUlJ,KAAK4B,WAGtDgE,YAAa,WAGZ,IAAI,GAFAtE,GAAQtB,KACRqJ,KACItG,EAAE,EAAGA,EAAEzB,EAAML,YAAY6B,OAAQC,IACxCsG,EAAKrG,KAAK1B,EAAM2H,SAAS3H,EAAML,YAAY8B,IAE5C,OAAOsG,IAGRxD,QAAS,WACR,GAAIvE,GAAQtB,KACRqJ,KACAC,EAAchI,EAAMsE,aACxB,IAAGtE,EAAMb,QACR,IAAI,GAAIsC,GAAE,EAAGA,EAAEzB,EAAMI,MAAMoB,OAAQC,IAClCsG,EAAKrG,KAAK1B,EAAMd,YAAYuC,GAAGuG,EAAYvG,SAGxC,IAAGzB,EAAMlB,SACb,IAAI,GAAI2C,GAAE,EAAGA,EAAEzB,EAAML,YAAY6B,OAAQC,IACxCsG,EAAKrG,KAAK1B,EAAMpB,WAAW6C,GAAGyD,KAAKlF,EAAM2H,SAAS3H,EAAML,YAAY8B,UAGrE,KAAI,GAAIA,GAAE,EAAGA,EAAEzB,EAAML,YAAY6B,OAAQC,IACxCsG,EAAKrG,KAAK1B,EAAMuC,SAASd,GAG3B,OAAOsG,IAGRE,aAAc,SAASrC,GACzB,MAAO,GAAElH,KAAK4B,SAASsF,EAAMlH,KAAK4B,UAGhCqB,eAAgB,SAASuG,GAGxB,IAAI,GAFAlI,GAAQtB,KACRqJ,KACItG,EAAE,EAAGA,EAAEzB,EAAMK,OAAOmB,OAAQC,IACnCsG,EAAKrG,KAAK1B,EAAMiI,aAAaC,EAASzG,KACtCzB,EAAMmI,aAAanI,EAAMK,OAAOoB,GAAGsG,EAAKtG,GAEzCzB,GAAML,YAAcoI,GAGrBK,YAAa,SAASR,GAClB,QAASlJ,KAAKiJ,SAASC,GAAU,GAAGlJ,KAAK4B,UAG7C6H,aAAc,SAASE,EAAWT,GAC9BS,EAAUlH,MAAMmH,gBAAkB,iBAAmBV,EAAW,SAChES,EAAUlH,MAAMoH,UAAY,iBAAmBX,EAAW,UAG9DY,cAAe,SAAS5C,EAAO6C,GAC9B/J,KAAKiB,YAAYiG,GAASlH,KAAKuJ,aAAaQ,GAC5C/J,KAAKyJ,aAAazJ,KAAK2B,OAAOuF,GAAOlH,KAAKiB,YAAYiG,KAGvD8C,kBAAmB,SAASL,EAAWzC,GACnClH,KAAKiB,YAAYiG,GAAS+C,SAASN,EAAUlH,MAAMoH,UAAUK,MAAM,KAAK,KAG5EC,YAAY,SAASR,GACpB,MAAOM,UAASN,EAAUlH,MAAMoH,UAAUK,MAAM,KAAK,KAGtDrG,SAAU,SAASyD,GAClB,GAAIhG,GAAQtB,KACRkH,EAAQ5F,EAAM2H,SAAS3H,EAAML,YAAYqG,GAC7C,OAAOhG,GAAMK,OAAO2F,GAAaE,qBAAqB,MAAMN,GAAO/C,WAGpEL,UAAW,SAASwD,GACnB,GAAIhG,GAAQtB,KACRkH,EAAQ5F,EAAM2H,SAAS3H,EAAML,YAAYqG,GAC7C,OAAOhG,GAAMK,OAAO2F,GAAaE,qBAAqB,MAAMN,GAAOkD,aAAa,YAGjF/E,aAAc,SAASiC,GACtB,GAAIhG,GAAQtB,KACRkH,EAAQ5F,EAAM2H,SAAS3H,EAAML,YAAYqG,GAC7C,OAAOhG,GAAMK,OAAO2F,GAAaE,qBAAqB,MAAMN,GAAOkD,aAAa,eAGjFjD,MAAO,SAASpB,EAAO4D,EAAWzC,GACjC,GAAI5F,GAAQtB,IAEZ,QADA+F,EAAQA,GAAStG,OAAOsG,MACjBA,EAAMhC,MACZ,IAAK,aACDzC,EAAMZ,OAASqF,EAAMsE,QAAQ,GAAGC,QAChChJ,EAAMT,SAAWS,EAAMZ,MAC1B,MAED,KAAK,WA6BD,GA3BAY,EAAMX,SAAWoF,EAAMwE,eAAe,GAAGD,QACzChJ,EAAMP,UAAYO,EAAMX,SAAWW,EAAMZ,OAGzCY,EAAM0I,kBAAkBL,EAAWzC,GACnC5F,EAAML,YAAYiG,GAAS5F,EAAMoI,YAAYpI,EAAML,YAAYiG,IAC/D5F,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,IAChD5F,EAAMN,iBAAmB2I,EAAUnC,qBAAqB,MAAM1E,OAAO,GAAGxB,EAAMM,SAI3EN,EAAML,YAAYiG,GAAS5F,EAAMP,UAAY,EAAEO,EAAMM,UACpDN,EAAML,YAAYiG,GAAS,EAAE5F,EAAMM,SACnC4I,WAAW,WACPlJ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,KACjD,MAEE5F,EAAML,YAAYiG,GAAS5F,EAAMP,UAAYO,EAAMN,iBACxDM,EAAML,YAAYiG,GAAS5F,EAAMN,eACjCwJ,WAAW,WACPlJ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,KACjD,MAIP5F,EAAMa,cAAcb,EAAMsE,cAActE,EAAMuE,WAE3CvE,EAAMb,QAAQ,CAChB,GAAIiI,GAAapH,EAAMsE,aACvB8C,GAAWxB,GAAS5F,EAAM2H,SAAS3H,EAAML,YAAYiG,IACrD5F,EAAM6G,WAAWjB,EAAOwB,GAG5B,KAED,KAAK,YACD3C,EAAM0E,iBACNnJ,EAAMV,MAAQmF,EAAMsE,QAAQ,GAAGC,QAC/BhJ,EAAMR,OAASQ,EAAMV,MAAQU,EAAMT,SAEnCS,EAAM0I,kBAAkBL,EAAWzC,GACnC5F,EAAML,YAAYiG,GAAS5F,EAAML,YAAYiG,GAAS5F,EAAMR,OAC5DQ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,IAChD5F,EAAMT,SAAWS,EAAMV,QAK7ByG,UAAW,SAAStB,EAAO4D,EAAWzC,GACrC,GAAI5F,GAAQtB,IAEZ,QADA+F,EAAQA,GAAStG,OAAOsG,MACjBA,EAAMhC,MACZ,IAAK,YACDzC,EAAMZ,OAASqF,EAAMuE,QACrBhJ,EAAMT,SAAWS,EAAMZ,OACvBY,EAAMJ,aAAc,CACvB,MAED,KAAK,UA4BD,GA1BAI,EAAMX,SAAWoF,EAAMuE,QACvBhJ,EAAMP,UAAYO,EAAMX,SAAWW,EAAMZ,OAGzCY,EAAM0I,kBAAkBL,EAAWzC,GACnC5F,EAAML,YAAYiG,GAAS5F,EAAMoI,YAAYpI,EAAML,YAAYiG,IAC/D5F,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,IAChD5F,EAAMN,iBAAmB2I,EAAUnC,qBAAqB,MAAM1E,OAAO,GAAGxB,EAAMM,SAI3EN,EAAML,YAAYiG,GAAS5F,EAAMP,UAAY,EAAEO,EAAMM,UACpDN,EAAML,YAAYiG,GAAS,EAAE5F,EAAMM,SACnC4I,WAAW,WACPlJ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,KACjD,MAEE5F,EAAML,YAAYiG,GAAS5F,EAAMP,UAAYO,EAAMN,iBACxDM,EAAML,YAAYiG,GAAS5F,EAAMN,eACjCwJ,WAAW,WACPlJ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,KACjD,MAGP5F,EAAMJ,aAAc,EACpBI,EAAMa,cAAcb,EAAMsE,cAActE,EAAMuE,WAC3CvE,EAAMb,QAAQ,CAChB,GAAIiI,GAAapH,EAAMsE,aACvB8C,GAAWxB,GAAS5F,EAAM2H,SAAS3H,EAAML,YAAYiG,IACrD5F,EAAM6G,WAAWjB,EAAOwB,GAE5B,KAED,KAAK,YACD3C,EAAM0E,iBACHnJ,EAAMJ,cACRI,EAAMV,MAAQmF,EAAMuE,QACpBhJ,EAAMR,OAASQ,EAAMV,MAAQU,EAAMT,SAEnCS,EAAM0I,kBAAkBL,EAAWzC,GACnC5F,EAAML,YAAYiG,GAAS5F,EAAML,YAAYiG,GAAS5F,EAAMR,OAC5DQ,EAAMmI,aAAaE,EAAWrI,EAAML,YAAYiG,IAChD5F,EAAMT,SAAWS,EAAMV,SAM9B6G,YAAa,SAASiD,EAAOxD,EAAOI,GACnC,GAAIhG,GAAQtB,IACT,IAAGsB,EAAMb,QAAQ,CAChB,GAAIiI,GAAapH,EAAMsE,aACvB8C,GAAWpB,GAAeJ,EAC1B5F,EAAM6G,WAAWb,EAAaoB,OAG9BpH,GAAML,YAAYqG,IAAgB,EAAEJ,GAAO5F,EAAMM,SACjDN,EAAMmI,aAAaiB,EAAMC,WAAYrJ,EAAML,YAAYqG,MAMzD5H","file":"mobileSelect.js","sourcesContent":["/*!\r\n * mobileSelect.js\r\n * (c) 2017-present onlyhom\r\n * Released under the MIT License.\r\n */\r\n\r\nwindow.MobileSelect = (function() {\r\n\r\n\tfunction getClass(dom,string) {\r\n\t\treturn dom.getElementsByClassName(string);\r\n\t}\r\n\r\n\t//构造器\r\n\tfunction MobileSelect(config) {\r\n\t\tthis.mobileSelect;\r\n\t\tthis.wheelsData = config.wheels;\r\n\t\tthis.jsonType =  false;\r\n\t\tthis.jsonData = [];\r\n\t\tthis.checkDataType();\r\n\t\tthis.renderWheels(this.wheelsData);\r\n\t\tthis.displayJson = []; \r\n\t\tthis.cascade = false;\r\n\t\tthis.startY;\r\n\t\tthis.moveEndY;\r\n\t\tthis.moveY;\r\n\t\tthis.oldMoveY;\r\n\t\tthis.offset = 0;\r\n\t\tthis.offsetSum = 0;\r\n\t\tthis.oversizeBorder;\r\n\t\tthis.curDistance = [];\r\n\t\tthis.clickStatus = false;\r\n\r\n\t\tthis.init(config);\r\n\t}\r\n\t\r\n\tMobileSelect.prototype = {\r\n\t\tconstructor: MobileSelect,\r\n\t\tinit: function(config){\r\n\t\t\tvar _this = this; \r\n\t\t\t_this.trigger = document.querySelector(config.trigger);\r\n\t\t\t_this.wheel = getClass(_this.mobileSelect,'wheel');   //wheel 数组\r\n\t\t\t_this.slider = getClass(_this.mobileSelect,'selectContainer'); // slider 数组\r\n\t\t\t_this.wheels = _this.mobileSelect.querySelector('.wheels');   //wheels\r\n\t\t\t_this.liHeight = _this.mobileSelect.querySelector('li').offsetHeight;\r\n\t\t\t_this.ensureBtn = _this.mobileSelect.querySelector('.ensure');\r\n\t\t\t_this.closeBtn = _this.mobileSelect.querySelector('.cancel');\r\n\t\t\t_this.grayLayer = _this.mobileSelect.querySelector('.grayLayer');\r\n\t\t\t_this.popUp = _this.mobileSelect.querySelector('.content');\r\n\t\t\t_this.callback = config.callback ? config.callback : function(){};\r\n\t\t\t_this.transitionEnd = config.transitionEnd ? config.transitionEnd : function(){};\r\n\t\t\t_this.initPosition = config.position ? config.position : [];\r\n\t\t\t_this.titleText = config.title ? config.title : '';\r\n\r\n\t\t\t_this.wheels.className += \" \" + _this.trigger.className;\r\n\t\t\t_this.trigger.style.cursor='pointer';\r\n\t\t\t_this.setTitle(_this.titleText);\r\n\t\t\t_this.checkCascade();\r\n\r\n\t\t\tif (_this.cascade) {\r\n\t\t\t\t_this.initCascade();\r\n\t\t\t}\r\n\r\n\t\t\t//定位 初始位置\r\n\t\t\tif(_this.initPosition.length == 0){\r\n\t\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t\t_this.initPosition.push(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_this.setCurDistance(_this.initPosition);\r\n\t\t\t_this.addListenerAll();\r\n\r\n\t\t\t//按钮监听\r\n\t\t\t_this.closeBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\r\n\t\t    _this.ensureBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t\tif($(_this.trigger).hasClass('filter-type') || $(_this.trigger).hasClass('filter-stage')) {\r\n\t\t\t\tpopup.hide(document.getElementById(\"filter-type\"));\r\n\t\t\t\tvar data_id='';\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ti==_this.wheel.length-1 ? tempValue += _this.getValue(i) : tempValue += _this.getValue(i)+' ';\r\n\t\t    \t\ti==_this.wheel.length-1 ? data_id += _this.getDataId(i) : data_id += _this.getDataId(i)+' ';\r\n\t\t    \t}\r\n\t\t    \tvar type = $(_this.trigger).hasClass('filter-type') ? '2':'3';\r\n\t\t    \t$(this).attr({'data-id': data_id, 'data-type': type});\r\n\t\t\t}else{\r\n\t\t\t\tvar tempValue ='';\r\n\t\t\t\tvar data_id='';\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ti==_this.wheel.length-1 ? tempValue += _this.getValue(i) : tempValue += _this.getValue(i)+' ';\r\n\t\t    \t\ti==_this.wheel.length-1 ? data_id += _this.getDataId(i) : data_id += _this.getDataId(i)+' ';\r\n\t\t    \t}\r\n\t\t    \t_this.trigger.innerHTML = tempValue;\r\n\t\t    \tvar id = $(_this.trigger).attr('data-id');\r\n\t\t    \t_this.trigger.setAttribute('data-id', data_id);\r\n\t\t    \tif($(_this.trigger).hasClass('select-sc-address')) {\r\n\t\t    \t\tif(id != data_id) {\r\n\t\t    \t\t\t$('span.select-qc-address').text('请选择').removeAttr('data-id');\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t\tvar _wheels = $('.wheels.select-qc-address');\r\n\t\t\t   \t\t\tvar _list = JSON.parse(localStorage.take_meal_list)[data_id];\r\n\t\t\t   \t\t\tvar _tempHTML = '';\r\n\t\t\t   \t\t\t_wheels.find('ul>li').remove();\r\n\t\t\t   \t\t\tfor(var i in _list) {\r\n\t\t\t\t\t\t\t_tempHTML += '<li data-id=\"'+i+'\">'+_list[i]+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_wheels.find('ul').append(_tempHTML);\r\n\t\t    \t\t}\r\n\t\t    \t} else if($(_this.trigger).hasClass('select-qc-address')) {\r\n\t\t    \t\tif(data_id == '-1') {\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t}else{\r\n\t\t    \t\t\t$('.address-textarea').addClass('aui-hide');\r\n\t\t    \t\t\t$('.f-textarea>textarea').val('');\r\n\t\t    \t\t\t\r\n\t\t    \t\t}\t\r\n\t\t    \t}else if ($(_this.trigger).hasClass('coupon-list')) {\r\n\t\t    \t\tvar data_price = '';\r\n\t\t    \t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t    \t\ti==_this.wheel.length-1 ? data_price += _this.getDataPrice(i) : data_price += _this.getDataPrice(i)+' ';\r\n\t\t\t    \t}\r\n\t\t\t    \tvar totalAmount = $('.pay-total').text();\r\n\t\t\t    \tvar yhAmount = $('.yh-money').text();\r\n\t\t\t    \tvar addAmount = accAdd(totalAmount, yhAmount);\r\n\t\t\t    \tvar accAmount = accSub(addAmount, data_price);\r\n\t\t\t    \t$('.pay-total').text(accAmount);\r\n\t\t\t    \t$('.yh-money').text(data_price);\r\n\t\t\t    \t_this.trigger.setAttribute('data-price', data_price);\r\n\t\t    \t}\r\n\t\t    \t_this.callback(_this.getIndexArr(),_this.getJson());\r\n\t\t\t}\r\n\t\t    });\r\n\r\n\t\t    _this.trigger.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.add('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.grayLayer.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.popUp.addEventListener('click',function(){\r\n\t\t    \tevent.stopPropagation(); \r\n\t\t    });\r\n\r\n\t\t\t_this.fixRowStyle(); //修正列数\r\n\t\t},\r\n\r\n\t\tsetTitle: function(string){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.titleText = string;\r\n\t\t\t_this.mobileSelect.querySelector('.title').innerHTML = _this.titleText;\r\n\t\t},\r\n\r\n\t\trenderWheels: function(wheelsData){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar _class = '';\r\n\t\t\tif($(_this.trigger).hasClass('select-expert-list')) {\r\n\t\t\t\t_class = 'expert-ensure';\r\n\t\t\t}\r\n\t\t\t_this.mobileSelect = document.createElement(\"div\");\r\n\t\t\t_this.mobileSelect.className = \"mobileSelect\";\r\n\t\t\t_this.mobileSelect.innerHTML = \r\n\t\t    \t'<div class=\"grayLayer\"></div>'+\r\n\t\t        '<div class=\"content\">'+\r\n\t\t            '<div class=\"btnBar\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                    '<div class=\"cancel\">取消</div>'+\r\n\t\t                    '<div class=\"title\"></div>'+\r\n\t\t                    '<div class=\"ensure '+_class+'\">选择</div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t            '<div class=\"panel\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                \t'<div class=\"wheels\">'+\r\n\t\t\t                '</div>'+\r\n\t\t                    '<div class=\"selectLine\"></div>'+\r\n\t\t                    '<div class=\"shadowMask\"></div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t        '</div>';\r\n\t\t    document.body.appendChild(_this.mobileSelect);\r\n\t\t\t//根据数据长度来渲染\r\n\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var i in wheelsData){ //列\r\n\t\t\t\ttempHTML += '<div class=\"wheel\"><ul class=\"selectContainer\">';\r\n\t\t\t\tif(_this.jsonType){\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) { \r\n\t\t\t\t\t\tif(wheelsData[i].data[j].d_price != undefined) {\r\n\t\t\t\t\t\t\tif(wheelsData[i].data[j].d_id == '-1') {\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'</li>';\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'  ￥-'+wheelsData[i].data[j].d_price+'</li>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].expert_id+'\">'+wheelsData[i].data[j].expert_name+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) {\r\n\t\t\t\t\t\ttempHTML += '<li data-id=\"'+j+'\">'+wheelsData[i].data[j]+'</li>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttempHTML += '</ul></div>';\r\n\t\t\t}\r\n\t\t\t_this.mobileSelect.querySelector('.wheels').innerHTML = tempHTML;\r\n\t\t},\r\n\r\n\t\taddListenerAll: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t//手势监听\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\t_this.addListenerWheel(_this.wheel[i], i);\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddListenerWheel: function(theWheel, index){\r\n\t\t\tvar _this = this;\r\n\t\t\ttheWheel.addEventListener('touchstart', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchend', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchmove', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\r\n\t\t\t//PC拖拽监听\r\n\t\t\ttheWheel.addEventListener('mousedown', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mousemove', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mouseup', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},true); \r\n\t\t},\r\n\r\n\t\taddListenerLi:function(sliderIndex){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar curWheelLi = _this.slider[sliderIndex].getElementsByTagName('li');\r\n\t\t\tfor(var j=0; j<curWheelLi.length;j++){\r\n\t\t\t\t(function (j) {\r\n\t\t\t\t\tcurWheelLi[j].addEventListener('click',function(){\r\n\t\t\t\t\t\t_this.singleClick(this, j, sliderIndex);\r\n\t\t\t\t\t},false);\r\n\t\t\t\t})(j);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckDataType: function(){ \r\n\t\t\tvar _this = this;\r\n\t\t\tif(typeof(_this.wheelsData[0].data[0])=='object'){\r\n\t\t\t\t_this.jsonType = true;\r\n\t\t\t\t_this.jsonData = _this.wheelsData[0].data;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tif(_this.jsonType){ \r\n\t\t\t\tvar node = _this.wheelsData[0].data;\r\n\t\t\t\tfor(var i=0; i<node.length; i++){\r\n\t\t\t\t\tif('childs' in node[i] && node[i].childs.length > 0){\r\n\t\t\t\t\t\t_this.cascade = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_this.cascade = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.displayJson.push(_this.generateArrData(_this.jsonData));\r\n\t\t\t_this.checkArrDeep(_this.jsonData[0]);\r\n\t\t\t//console.log('将要显示的json:'); \r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t},\r\n\r\n\t\tgenerateArrData: function (targetArr) {\r\n\t\t\tvar tempArr = [];\r\n\t\t\tfor(var i=0; i<targetArr.length; i++){\r\n\t\t\t\ttempArr.push({\r\n\t\t\t\t\t\"id\": targetArr[i].id,\r\n\t\t\t\t\t\"value\": targetArr[i].value\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn tempArr;\r\n\t\t},\r\n\r\n\t\tcheckArrDeep: function (parent) { //检测子节点深度  修改 displayJson\r\n\t\t\tvar _this = this;\r\n\t\t\tif ('childs' in parent && parent.childs.length > 0) {\r\n\t\t\t\t_this.displayJson.push(_this.generateArrData(parent.childs)) ; //生成子节点数组\r\n\t\t\t\t_this.checkArrDeep(parent.childs[0]);//检测下一个子节点\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckRange: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar deleteNum = _this.displayJson.length-1-index;\r\n\t\t\tfor(var i=0; i<deleteNum; i++){\r\n\t\t\t\t_this.displayJson.pop(); //修改 displayJson\r\n\t\t\t}\r\n\t\t\tvar resultNode;\r\n\t\t\tfor (var i = 0; i <= index; i++){\r\n\t\t\t\tif (i == 0)\r\n\t\t\t\t\tresultNode = _this.jsonData[posIndexArr[0]];\r\n\t\t\t\telse {\r\n\t\t\t\t\tresultNode = resultNode.childs[posIndexArr[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_this.checkArrDeep(resultNode);\r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t\t_this.fixRowStyle();\r\n\t\t\t_this.setCurDistance(_this.resetPostion(index, posIndexArr));\r\n\t\t},\r\n\r\n\t\tresetPostion: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempPosArr = posIndexArr;\r\n\t\t\tvar tempCount;\r\n\t\t\tif(_this.slider.length > posIndexArr.length){ \r\n\t\t\t\ttempCount = _this.slider.length - posIndexArr.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){  \r\n\t\t\t\t\ttempPosArr.push(0);\r\n\t\t\t\t}\r\n\t\t\t}else if(_this.slider.length < posIndexArr.length){\r\n\t\t\t\ttempCount = posIndexArr.length - _this.slider.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){\r\n\t\t\t\t\ttempPosArr.pop();\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tfor(var i=index+1; i< tempPosArr.length; i++){\r\n\t\t\t\ttempPosArr[i] = 0;\r\n\t\t\t} \r\n\t\t\treturn tempPosArr;\r\n\t\t},\r\n\r\n\t\tupdateWheels: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t//删除多余的wheel\r\n\t\t\tif(_this.wheel.length > _this.displayJson.length){\r\n\t\t\t\tvar count = _this.wheel.length - _this.displayJson.length;\r\n\t\t\t\tfor(var i=0; i<count; i++){\r\n\t\t\t\t\t_this.wheels.removeChild(_this.wheel[_this.wheel.length-1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i=0; i<_this.displayJson.length; i++){ //列\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\tvar tempHTML='';\r\n\t\t\t\t\tif(_this.wheel[i]){\r\n\t\t\t\t\t\t//console.log('插入Li');\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.slider[i].innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar tempWheel = document.createElement(\"div\");\r\n\t\t\t\t\t\ttempWheel.className = \"wheel\";\r\n\t\t\t\t\t\ttempHTML = '<ul class=\"selectContainer\">';\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempHTML += '</ul>';\r\n\t\t\t\t\t\ttempWheel.innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t\t_this.addListenerWheel(tempWheel, i);\r\n\t\t\t\t    \t_this.wheels.appendChild(tempWheel); \r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateWheel: function(sliderIndex, data){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var j=0; j<data.length; j++){\r\n\t\t\t\ttempHTML += '<li>'+data[j]+'</li>'\r\n\t\t\t}\r\n\t\t\t_this.slider[sliderIndex].innerHTML = tempHTML;\r\n\t\t\t_this.addListenerLi(sliderIndex);\r\n\t\t},\r\n\r\n\t\tfixRowStyle: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar width = (100/_this.wheel.length).toFixed(2);\r\n\t\t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t\t_this.wheel[i].style.width = width+'%';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t    getIndex: function(distance){\r\n\t        return Math.round((2*this.liHeight-distance)/this.liHeight);\r\n\t    },\r\n\r\n\t    getIndexArr: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t    \t\ttemp.push(_this.getIndex(_this.curDistance[i]));\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    getJson: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tvar positionArr = _this.getIndexArr();\r\n\t    \tif(_this.cascade){\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ttemp.push(_this.displayJson[i][positionArr[i]]);\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \telse if(_this.jsonType){\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.wheelsData[i].data[_this.getIndex(_this.curDistance[i])]);\r\n\t\t    \t}\r\n\t    \t}else{\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.getValue(i));\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    calcDistance: function(index){\r\n\t\t\treturn 2*this.liHeight-index*this.liHeight;\r\n\t    },\r\n\r\n\t    setCurDistance: function(indexArr){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.slider.length; i++){\r\n\t    \t\ttemp.push(_this.calcDistance(indexArr[i]));\r\n\t    \t\t_this.movePosition(_this.slider[i],temp[i]);\r\n\t    \t}\r\n\t    \t_this.curDistance = temp;\r\n\t    },\r\n\r\n\t    fixPosition: function(distance){\r\n\t        return -(this.getIndex(distance)-2)*this.liHeight;\r\n\t    },\r\n\r\n\t    movePosition: function(theSlider, distance){\r\n\t        theSlider.style.webkitTransform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t        theSlider.style.transform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t    },\r\n\r\n\t    locatePostion: function(index, posIndex){\r\n\t    \tthis.curDistance[index] = this.calcDistance(posIndex);\r\n\t    \tthis.movePosition(this.slider[index],this.curDistance[index]);\r\n\t    },\r\n\r\n\t    updateCurDistance: function(theSlider, index){\r\n\t        this.curDistance[index] = parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getDistance:function(theSlider){\r\n\t    \treturn parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getValue: function(sliderIndex){\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].innerHTML;\r\n\t    },\r\n\r\n\t    getDataId: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-id');\r\n\t    },\r\n\r\n\t    getDataPrice: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-price');\r\n\t    },\r\n\r\n\t    touch: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"touchstart\":\r\n\t\t\t        _this.startY = event.touches[0].clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchend\":\r\n\r\n\t\t\t        _this.moveEndY = event.changedTouches[0].clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchmove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        _this.moveY = event.touches[0].clientY;\r\n\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    dragClick: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"mousedown\":\r\n\t\t\t        _this.startY = event.clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t\t\t        _this.clickStatus = true;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mouseup\":\r\n\r\n\t\t\t        _this.moveEndY = event.clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\t\t\t        _this.clickStatus = false;\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mousemove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        if(_this.clickStatus){\r\n\t\t\t\t        _this.moveY = event.clientY;\r\n\t\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    singleClick: function(theLi, index, sliderIndex){\r\n\t    \tvar _this = this;\r\n\t        if(_this.cascade){\r\n\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t        tempPosArr[sliderIndex] = index;\r\n\t        \t_this.checkRange(sliderIndex, tempPosArr);\r\n\r\n\t        }else{\r\n\t\t        _this.curDistance[sliderIndex] = (2-index)*_this.liHeight;\r\n\t\t        _this.movePosition(theLi.parentNode, _this.curDistance[sliderIndex]);\r\n\t        }\r\n\t    }\r\n\r\n\t};\r\n\r\n\treturn MobileSelect;\r\n})();\r\n"]}