{"version":3,"sources":["aui/aui-popup.js"],"names":["window","undefined","auiPopup","this","_init","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_FOR","__POPUP_IN","__POPUP_OUT","popupStatus","prototype","self","_btn","document","querySelectorAll","i","length","setAttribute","onclick","e","popupId","getAttribute","popupDom","getElementById","className","indexOf","querySelector","hide","show","el","style","display","setTimeout","classList","add","addEventListener","event","preventDefault","remove"],"mappings":"CAOA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAW,WACXC,KAAKC,SAMRC,EAAiB,eACjBC,EAAkB,gBAClBC,EAAkB,gBAKlBC,EAAa,IAAIH,EACjBI,EAAc,IAAIH,EACfI,GAAc,CAClBR,GAASS,WACLP,MAAO,WACN,GAAIQ,GAAOT,KACPU,EAAOC,SAASC,iBAAiB,IAAIR,EAAgB,IACzD,IAAGM,EACF,IAAI,GAAIG,GAAE,EAAEA,EAAEH,EAAKI,OAAOD,IACzBH,EAAKG,GAAGE,aAAa,UAAW,IAChCL,EAAKG,GAAGG,QAAU,SAASC,GAC1B,GAAIC,GAAUlB,KAAKmB,aAAaf,GAC5BgB,EAAWT,SAASU,eAAeH,EACpCE,KACLA,EAASE,UAAUC,QAAQrB,OAAwBS,SAASa,cAAcnB,GACnEI,EAAKgB,KAAKL,GAEbX,EAAKiB,KAAKN,MAShBM,KAAM,SAASC,GACd,GAAIlB,GAAOT,IACX,OAAG2B,GAAGL,UAAUC,QAAQrB,OAAwBS,SAASa,cAAcnB,OACnEI,GAAKgB,KAAKE,QAGRpB,IAKNoB,EAAGC,MAAMC,QAAU,QACnBC,WAAW,WAEPH,EAAGI,UAAUC,IAAI9B,GACdK,GAAc,GAClB,IAKAoB,EAAGM,iBAAiB,YAAa,SAASC,GACtCA,EAAMC,mBACR,MAENV,KAAM,SAASE,GACPpB,GAGHI,SAASa,cAAcnB,KACxBM,SAASa,cAAcnB,GAAY0B,UAAUC,IAAI7B,GACjDQ,SAASa,cAAcnB,GAAY0B,UAAUK,OAAOlC,GACvD4B,WAAW,WACAnB,SAASa,cAAclB,KACjCK,SAASa,cAAclB,GAAasB,MAAMC,QAAU,OACjDlB,SAASa,cAAclB,GAAayB,UAAUK,OAAOjC,GAIlDI,GAAc,IAClB,QAGXV,EAAOE,SAAWA,GAChBF","file":"aui-popup.js","sourcesContent":["/**\r\n * aui-popup.js\r\n * @author 流浪男\r\n * @todo more things to abstract, e.g. Loading css etc.\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiPopup = function() {\r\n        this._init();\r\n    };\r\n    var\tCLASS_MASK = \"aui-mask\",\r\n    \tCLASS_MASK_IN = 'aui-mask-in',\r\n    \tCLASS_MASK_OUT = 'aui-mask-out',\r\n        CLASS_POPUP = 'aui-popup',\r\n    \tCLASS_POPUP_IN = 'aui-popup-in',\r\n    \tCLASS_POPUP_OUT = 'aui-popup-out',\r\n    \tCLASS_POPUP_FOR = 'aui-popup-for';\r\n    var\t__MASK = '.'+CLASS_MASK,\r\n    \t__MASK_IN = '.'+CLASS_MASK_IN,\r\n    \t__MASK_OUT = '.'+CLASS_MASK_OUT,\r\n        __POPUP = '.'+CLASS_POPUP,\r\n    \t__POPUP_IN = '.'+CLASS_POPUP_IN,\r\n    \t__POPUP_OUT = '.'+CLASS_POPUP_OUT;\r\n    var popupStatus = false;\r\n    auiPopup.prototype = {\r\n        _init: function() {\r\n        \tvar self = this;\r\n        \tvar _btn = document.querySelectorAll(\"[\"+CLASS_POPUP_FOR+\"]\");\r\n        \tif(_btn){\r\n        \t\tfor(var i=0;i<_btn.length;i++){\r\n        \t\t\t_btn[i].setAttribute(\"tapmode\", \"\");\r\n        \t\t\t_btn[i].onclick = function(e){\r\n        \t\t\t\tvar popupId = this.getAttribute(CLASS_POPUP_FOR);\r\n        \t\t\t\tvar popupDom = document.getElementById(popupId);\r\n        \t\t\t\tif(popupDom){\r\n\t\t\t\t\t\t\tif(popupDom.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\r\n\t\t\t\t\t            self.hide(popupDom);\r\n\t\t\t\t\t        }else{\r\n\t\t\t\t\t        \tself.show(popupDom);\r\n\t\t\t\t\t        }\r\n        \t\t\t\t}else{\r\n        \t\t\t\t\treturn;\r\n        \t\t\t\t}\r\n\t\t\t\t\t}\r\n        \t\t}\r\n        \t}\r\n        },\r\n        show: function(el){\r\n        \tvar self = this;\r\n        \tif(el.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\r\n\t            self.hide(el);\r\n\t            return;\r\n\t        }\r\n            if(popupStatus) return;\r\n   //      \tif(!document.querySelector(__MASK)){\r\n\t\t\t// \tvar maskHtml = '<div class=\"aui-mask\"></div>';\r\n\t\t\t// \tdocument.body.insertAdjacentHTML('beforeend', maskHtml);\r\n\t\t\t// }\r\n        \tel.style.display = \"block\";\r\n        \tsetTimeout(function(){\r\n        \t\t// document.querySelector(__MASK).classList.add(CLASS_MASK_IN);\r\n\t            el.classList.add(CLASS_POPUP_IN);\r\n                popupStatus = true;\r\n\t        }, 10)\r\n\t        // document.querySelector(__MASK).addEventListener(\"touchstart\", function(event){\r\n\t        // \tevent.preventDefault();\r\n\t        // \tself.hide(el);\r\n\t        // })\r\n            el.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            },false)\r\n        },\r\n        hide: function(el){\r\n            if(!popupStatus) return;\r\n        \t// document.querySelector(__MASK).classList.remove(CLASS_MASK_IN);\r\n        \t// document.querySelector(__MASK).classList.add(CLASS_MASK_OUT);\r\n        \tif(!document.querySelector(__POPUP_IN))return;\r\n            document.querySelector(__POPUP_IN).classList.add(CLASS_POPUP_OUT);\r\n            document.querySelector(__POPUP_IN).classList.remove(CLASS_POPUP_IN);\r\n\t        setTimeout(function(){\r\n                if(!document.querySelector(__POPUP_OUT))return;\r\n\t        \tdocument.querySelector(__POPUP_OUT).style.display = \"none\";\r\n\t            document.querySelector(__POPUP_OUT).classList.remove(CLASS_POPUP_OUT);\r\n\t   //          if(document.querySelector(__MASK)){\r\n\t\t\t\t// \tdocument.querySelector(__MASK).parentNode.removeChild(document.querySelector(__MASK));\r\n\t\t\t\t// }\r\n                popupStatus = false;\r\n\t        }, 300)\r\n        }\r\n    };\r\n\twindow.auiPopup = auiPopup;\r\n})(window);"]}